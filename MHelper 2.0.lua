--[[
	
	/* TODO:
	
	1. Сделать проверку по серийнику жесткого диска. Получать из github gist с серийниками одобренных
	дисков. Выводить серийник как логин и пароль придумать (всё это в gist). Потом чекать равен ли логин серий-
	ному номеру. Выводить возможный логин на экран, при авторизации в аккаунт скрипта. [+]
	
	Как добавлять серийник в gist? - Возможно отправлять post запрос в ВК с серийниками и никами тех, чей серийник
	не нашли в gist. [+]
	
	При первой авторизации сохранять данные в ini. (Последующая авторизация не потребуется) [+]
	
	2. Допилить IP инфо (Чекер регов). [+]

	10. Авто-апдейт сделать [+]
	
	11. /gmuse при авторизации [-]
	
	5. Отправка бага через post запрос ВК/Telegram. [+]
	
	6. Добавить пару читов (WH, GM от взрывов/падений) [+]
	
	7. Добавить авто-принятие форм (как в старом) и просто ручное :) [+-]
	
	8. Изменение цвета вип чата (хуком). [-]
	
	9. Поспать. [+]
	
	
	
	3. Сделать зло-ебучую двойную тему через "imgui.PushStyleColor(Что изменить, цвет в ImVec4)". [-]

	4. Сделать диалог между пользователем и мной в скрипте. Я через ВК. Попробывать, хз как (маленький приоритет). [ВИП Версия]

	12. Вычесление флуда. [ВИП Версия]
	
	
	*/
]]

local function AAAAAAAAAAA()
	::A1111111111::
	::A2222222222::
	::A3333333333::
	goto A1111111111
	goto A2222222222
	goto A3333333333
end

local function ADC2()
	goto D366666
	::D366666::
    (""):__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()
    (""):__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()
    (""):__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()
    (""):__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()
    (""):__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()
    (""):__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()
    (""):__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()
    (""):__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()
    (""):__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()
    (""):__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()
    (""):__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()
    (""):__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()
	goto D366666
	::A11111111112::
	::A22222222222::
	::A33333333332::
	goto A11111111112
	goto A22222222222
	goto A33333333332
end

if not getMoonloaderVersion then -- тут НЕ нужны скобки (можно также проверить тип переменной и убедиться, что это не функция)
    return print("Для этого скрипта требуется установка Moonloader.")
end

-----------[[[[    ЗАВИСИМОСТИ    ]]]]-----------
local imgui = require 'imgui'
local inicfg = require 'inicfg'
local vkeys = require 'vkeys'
local effil = require "effil"
local cjson = require "cjson"
local sampev = require 'lib.samp.events'
local mem = require "memory"
local fa = require 'faIcons'
local faw = require 'fAwesome5'
local ffi = require "ffi"
local encoding = require "encoding" --К переменным
require 'lib.sampfuncs'
require 'lib.moonloader'
local Matrix3X3 = require "matrix3x3"
local Vector3D = require "vector3d"
local render = require 'lib.render'
local copas = require 'copas'
local http = require 'copas.http'
imgui.ToggleButton = require('imgui_addons').ToggleButton
encoding.default = 'CP1251'
u8 = encoding.UTF8 
script_name('MHelper')
script_version('2.0')

-----------[[[[    ПЕРЕМЕННЫЕ    ]]]]-----------
local main_window_state = imgui.ImBool(false) -- ++
local recon_menu = imgui.ImBool(false)
local az = imgui.ImBool(false) -- ++
local add_zone = imgui.ImBool(false) -- ++
local report = imgui.ImBool(false)
local reglament = imgui.ImBool(false)
local gps_help = imgui.ImBool(false)
local check_ip = imgui.ImBool(false)
local check_script = imgui.ImBool(false) --

local getBonePosition = ffi.cast("int (__thiscall*)(void*, float*, int, bool)", 0x5E4280)
local tSelButtons = { "Основное", "Связь с разработчиком", "Информация" }
local navigation = {
    current = 0,
    list = { u8"Настройки", u8"Функционал", u8"Donate", u8"Информация" }
}
local forms = {
    ['warn'] = 3,
    ['kick'] = 1,
    ['ban'] = 3,
    ['mute'] = 1,
    ['jail'] = 2,
    ['fv'] = 3,
    ['get'] = 4,
    ['offget'] = 4,
    ['ipaccounts'] = 4,
    ['skick'] = 2,
    ['sethp'] = 2,
    ['skin'] = 3,
    ['unwarn'] = 3,
    ['banip'] = 4,
    ['unjail'] = 2,
    ['offban'] = 3,
    ['offwarn'] = 3,
    ['sban'] = 4,
    ['offjail'] = 3,
    ['offmute'] = 2,
    ['spcarid'] = 2,
    ['oad'] = 3,
    ['spawn'] = 3, 
    ['cc'] = 4}


local sWindows = tSelButtons[1]
local font_e = renderCreateFont("Tahoma", 10, 4)
local font1 = renderCreateFont("Tahoma", 13, 8)
local font_flag = require('moonloader').font_flag
local my_font = renderCreateFont('Century Gothic', 12, font_flag.BOLD + font_flag.SHADOW)
local selectable = 0
local player_spec = ''
local veh_spec = ''
local keyToggle_cw = VK_MBUTTON
local keyApply = VK_RBUTTON
local step_auth = 0
local report_id = ''
local filter = ""
local name_report_adv = ''
local id_report_adv = ''
local text_report_adv = ''
local nick_report = ''
local question_report = ''
local recon_text = ''
local id_dialog_report = ''
local ip_info = ''
local distances = ''
local ping_sp = ''
local hp_sp = '' 
local arm_sp = '' 
local version_sp = '' 
local ip_sp = ''
local serial = ''
local new_form = nil
local password_script_from_json = ''
local is_auth = false
local is_script_auth = false
local auth_script = false
local rdata = {}
local for_render = {}
keyToggle = VK_F5
secondaryKey = VK_B
positionX = 15
positionY = 450
pagesize = 10
messagesMax = 300
blacklist = {
    'AFK',
    'На паузе:'
    }
local infoCar = {
    pcar = {
        idLastCar = -1
    }
}

local tMenu = 0


---------- [[[[ INI CFG ]]]] ------------
local main_config = {
    amenu_config = {
        autologin_acc = false,
        autologin_adm = false,
        clickwarp = false,
        emenu = false,
        custom_report = true,
        admin_lvl = 1,
        auth_ld = 0,
        password_of_script = '',
        auth_skin = 0,
        auth_inter = 0,
        auth_famld = 0
        
    }
}

local adm_zone = {
    az = {
        ["AZ #1"] = "2570,-1281,1065, INT: 2",
        ["AZ #2"] = "1221, 8, 1001, INT: 2"
    }
}

local all = {
    vazhnoe = {},
    raboti = {},
    gosski = {},
    nelegal = {},
    avto = {},
    prochee = {},
    poisk = {}
}

local teleports = {
    {  
        { "Мэрия", 1480.6, -1750.1, 15.6 },
        { "ФБР", -2432.0, 493.6, 30.1 },
        { "Армия LV", 135.5, 1950.0, 19.5 },
        { "LSPD", 1546.0, -1676.0, 13.6 },
        { "SFPD", -1605.4, 718.8, 12.1 },
        { "LVPD", 2285.2, 2423.5, 11.0 },
        { "Больница LS", 1177.8, -1323.6, 14.1 },
        { "Больница SF", -2657.2, 632.3, 14.6 },
        { "Больница LV", 1611.8, 1823.2, 11.0 },
        { "СМИ", -2046.5, 465.7, 35.3 },
        { "Тюрьма Ред-Игл", -1038.1, -556.4, 32.2 },

        { "Pirus", 2647.6, -2007.2, 13.5 },
        { "Grove Street", 2488.0, -1668.8, 13.4 },
        { "Ballas", 1935.1, -1129.3, 25.5 },
        { "Vagos", 2786.0, -1604.5, 11.0 },
        { "Aztecas", 1702.4, -2112.8, 13.4 },
        { "Rifa", 2183.2, -1793.3, 13.5 },

        { "LCN", 1448.1, 751.1, 10.8 },
        { "Русская мафия", 960.6, 1733.0, 8.7 },
        { "Yakuza", 2608.0, 1837.9, 10.7 },
        { "Los Zetas", 1050.1, -336.1, 74.0 },
        { "Hell's Angels", 684.4, -479.8, 16.4 },
    },
    {
        { "Админ комната №1", 2324.419921,-1145.568359,1050.710083, 12 },
        { "Админ комната №2", -729.276000,503.086944,1371.971801, 1 },
        { "Админ комната №3", -794.806396,497.738037,1376.195312, 1 },
        { "Бокс №1", 773.579956,-77.096694,1000.655029, 7 },
        { "Бокс №2", 774.213989,-48.924297,1000.585937, 6 },
        { "Бокс №3", 772.111999,-3.898649,1000.728820, 5 },
        { "Самолёт", 1.808619,32.384357,1199.593750, 1 },
        { "Огромный склад", 2543.462646,-1308.379882,1026.728393, 2 },
        { "Музей", 1710.433715,-1669.379272,20.225049, 18 },
        { "Склад №1", 1059.895996,2081.685791,10.820312, 0 },
        { "Склад №2", 1059.180175,2148.938720,10.820312, 0 },
        { "Для мотоциклов", -1401.829956,107.051300,1032.273437, 1 },
        { "Поле для трюков", -1465.268676,1557.868286,1052.531250, 14 },
        { "Поле для гонок №1", -1444.645507,-664.526000,1053.572998, 4 },
        { "Поле для гонок №2", -1398.065307,-217.028900,1051.115844, 7 },
        { "Дерби", -1398.103515,937.631164,1036.479125, 15 },
        { "Поле войны", -975.975708,1060.983032,1345.671875, 10 },
        { "Странное место", -226.2, 1407.0, 27.773435, 18 },
        { "Стриптиз Клуб", -2640.762939,1406.682006,906.460937, 3 }
    },
    {
        {
            { 1543.0, -1354.4, 329.5 },
            { 1569.2, -1242.5, 277.9 },
            { 1451.7, -1066.9, 213.4 },
            { 1408.1, -1202.1, 187.2 },
            { 1416.9, -1469.6, 125.4 },
            { 1344.4, -1550.3, 85.5 },
            { 1670.5, -1343.2, 158.5 },
            { 1813.8, -1296.3, 131.7 },
            { 2043.7, -1401.7, 68.3 },
            { 2075.1, -1415.4, 48.3 },
            { 2738.5, -1760.5, 44.1 },
            { 1781.9, -1119.6, 84.5 },
            { 1753.1, -1212.6, 91.6 },
            { 901.5, -1021.9, 107.6 }
        },
        {
            { -1753.6, 885.4, 295.9 },
            { -1780.1, 574.6, 234.9 },
            { -1942.5, 515.5, 202.3 },
            { -1953.3, 623.8, 145.3 },
            { -1937.7, 773.6, 107.7 },
            { -2070.0, 443.2, 139.7 },
            { -2392.5, 439.5, 73.3 },
            { -2311.0, 460.7, 73.7 },
            { -2464.0, 129.6, 64.9 },
            { -2716.4, -318.2, 57.5 },
            { -2509.8, -707.1, 279.7 },
            { -2054.4, -442.5, 75.2 }
        },
        {
            { 1960.5, 1915.1, 130.9 },
            { 2240.8, 2087.8, 100.4 },
            { 2247.0, 2200.4, 103.9 },
            { 2438.5, 2085.5, 62.3 },
            { 2470.6, 2181.7, 80.4 },
            { 2463.3, 2288.8, 91.6 },
            { 2403.8, 1597.6, 60.5 },
            { 2322.6, 1084.1, 85.9 },
            { 1967.9, 1203.9, 62.9 },
            { 1711.1, 1202.5, 34.8 }, 
            { 1132.4, 1529.8, 52.4 },
            { 1442.2, 2148.2, 29.7 }
        }
    }
}

local regl_kick = [[- AFK на дороге больше 2-ух минут;
- AFK на койке в больнице;
- Помеха игровому процессу;
- Помеха работе администрации.]]

local regl_mute = [[- Метагейминг [MG] — 15 минут;
- Использование репорт-рекламы — 15-30 минут;
- Капс — 25 минут;
- Ненормативная лексика — 20 минут;
- Флуд / спам — 30 минут;
- Транслит — 15 минут;
- NonRp /me /do /try — 30-40 минут;
- Оскорбление — 30 минут;
- NonRp /ad — 60 минут;
*Примечание: выдаётся тому игроку, который подал объявление.
- Выдача себя за администратора — 60 минут;
- Упоминание родных — 120 минут;
- Реклама — 120 минут;
*Примечание: реклама сторонних ресурсов (ВКонтакте, ютуб и т.д.).
- Рулетка в /try — 60 минут;
- Оскорбление администрации — 60 минут.]]

local regl_jail = [[- DM car — 30 мин;
- DM — 40 минут;
- DB — 30 минут;
- TK — 30 минут;
- PG — 30-50 минут;
- SK — 60 минут;
*Примечание: массовый расстрел на респе (более 3-ёх человек) - варн.
- RK через /spaw — 40 минут;
*Примечание: более 2-ух раз — варн.
- Сбив анимации — 60 минут;
- nRP поведение — 20-40 минут;
- Помеха / попытка срыва стрелы/капта - 60 минут или бан 3 дня;
- Продажа оружия/наркотиков в зелёной зоне — 90 минут;
- DM в зелёной зоне — 90 минут;
*Примечание: массовый DM — варн.
- +С — 90 минут;
*Примечание: выдаётся призон, если нет вреда другому игроку.
- Багоюз — 90 минут;
*Примечание: за активное использование - варн.
- nRP аксессуар(-ы) — 30 минут;
- nRP езда — 30 минут;
- Таран — 30 минут;
- Уход от RP-процесса — 60 минут или варн;
- DM баллончиком или огнетушителем — 40 минут;
- Помеха работе администрации — 10 минут.]]

local regl_warn = [[- Массовое SK
- RK через /spaw более 2-ух раз;
- nRP поведение во фракции;
- +C в игрока;
- Грубое нарушение ПРО (только для сотрудников СМИ);
- Активное использование багов;
- DM в зелёной зоне;
- Активный багоюз;
- Уход от RP-процесса.]]

local regl_ban = [[- Попытка срыва ГРП или ГМП — 3 дня;
- Неадекватное поведение — 3 дня;
- Массовый DB лопастями — 3 дня;
- DM или DB на слёте — 3 дня;
- Вред игрокам [на слёте в том числе] — 5 дней;
- Убийство самолётом — 5 дней;
- Желание смерти игрокам — 5 дней;
- Инвайт во фракцию за деньги — 7 дней;
- Желание смерти родным — 15 дней;
- Расизм — 15 дней;
- Неуважительное отношение в сторону родных — 15 дней;
- Розжиг межнациональной розни — 15 дней;
- Отсутствие опры на слет — 15 дней;
- Блат во фракции — 30 дней;
- Попытка слить лидера или хелпера или администратора — 30 дней;
- Подкидывание диалогового окна — 30 дней;
- Оскорбление в нике [при отказе смены] — 30 дней;
- Использование запрещённых программ — 30 дней;
- Попытка nRP развода — 30 дней;
- Обман администрации — 30 дней;
- Хранение запрещённых программ — 30 дней;
- Распространение запрещённых программ — 30 дней;
- Массовое распространение запрещённых программ — ЧС проекта;
- Отказ от проверки на наличие запрещённых программ — 30 дней;
- Реклама других проектов — 30 дней;
- Похожие ники [при отказе смены] — 9999 дней;
- nRP развод — 9999 дней & banIP & Обнуление аккаунта(-ов) & бан всех твинков;
- Купля или продажа или передача аккаунтов — 9999 дней;
- Купля или продажа имущества за реальные деньги — 9999 дней.]]





local gps_cfg = inicfg.load(all, 'MHelper\\GPS\\GPS.ini')
local main_cfg = inicfg.load(main_config, "MHelper\\Config\\main_config.ini")
local admin_zone = inicfg.load(adm_zone, "MHelper\\Config\\admin_zones.ini")
local auto_auth = imgui.ImBool(main_config.amenu_config.autologin_acc)
local auto_auth_adm = imgui.ImBool(main_config.amenu_config.autologin_adm)
local custom_report_imgui = imgui.ImBool(main_config.amenu_config.custom_report)
local clickwarp = imgui.ImBool(main_config.amenu_config.clickwarp)
local emenu = imgui.ImBool(main_config.amenu_config.emenu)
local bubble_chat_imgui = imgui.ImBool(main_config.amenu_config.bubble_chat)
local speed_hack = imgui.ImBool(main_config.amenu_config.speed_hack)
local wall_hack = imgui.ImBool(main_config.amenu_config.wall_hack)
local god_mode = imgui.ImBool(main_config.amenu_config.god_mode)
local god_mode_car = imgui.ImBool(main_config.amenu_config.god_mode_car)
local air_brake = imgui.ImBool(main_config.amenu_config.air_brake)
local inf_ammo = imgui.ImBool(main_config.amenu_config.inf_ammo)
local no_bike = imgui.ImBool(main_config.amenu_config.no_bike)
local anti_eject_car = imgui.ImBool(main_config.amenu_config.anti_eject_car)
local car_info = imgui.ImBool(main_config.amenu_config.car_info)
local count_rep = imgui.ImBool(main_config.amenu_config.count_rep)
local fast_nakaz = imgui.ImBool(main_config.amenu_config.fast_nakaz)
local togphone = imgui.ImBool(main_config.amenu_config.togphone)



gmped = false
gmcar = false
wh = false

biba = false

local password_acc = imgui.ImBuffer(256)
local answer = imgui.ImBuffer(256)
local Xinput = imgui.ImBuffer(256)
local Yinput = imgui.ImBuffer(256)
local Zinput = imgui.ImBuffer(256)
local intInput = imgui.ImBuffer(256)
local nameint = imgui.ImBuffer(256)
local bug = imgui.ImBuffer(512)
local novovvedenie = imgui.ImBuffer(512)
local login_script = imgui.ImBuffer(256)
local password_script = imgui.ImBuffer(256)
local ip_info = imgui.ImBuffer(1024)
local admin_lvl = imgui.ImInt(1)
local auth_skin = imgui.ImInt(0)
local auth_inter = imgui.ImInt(0)
local auth_ld = imgui.ImInt(0)
local auth_famld = imgui.ImInt(0)
local prefix_adm = imgui.ImBuffer(128)


local dialog_status = false
local image_vk_ico = nil
local password_adm = imgui.ImBuffer(256)

local intInfoCars = imgui.ImInt(main_config.amenu_config.intInfoCars)

password_adm.v = main_config.amenu_config.password_adm
admin_lvl.v = main_config.amenu_config.admin_lvl
password_acc.v = main_config.amenu_config.password_acc
auth_skin.v = main_config.amenu_config.auth_skin
auth_inter.v = main_config.amenu_config.auth_inter
auth_ld.v = main_config.amenu_config.auth_ld
auth_famld.v = main_config.amenu_config.auth_famld

-----------[[[[    ФУНКЦИИ    ]]]]-----------


function testtest()
    lua_thread.create(function()
        while true do
            wait(1000)
            otveti = main_config.amenu_config.otv
        end
    end)
end

function main()
    while not isSampAvailable() do wait(50) end
    initializeRender()
    if not isSampfuncsLoaded() or not isSampLoaded() then
        return
    end
    otveti = main_config.amenu_config.otv
    testtest()

    if not doesDirectoryExist('moonloader\\config\\MHelper') then
        createDirectory('moonloader\\config\\MHelper') -- [[ Создаем директорию скрипта ]] 
        createDirectory('moonloader\\config\\MHelper\\GPS') -- [[ Создаем директорию скрипта ]] 
        createDirectory('moonloader\\config\\MHelper\\Icons') -- [[ Создаем директорию скрипта ]] 
        createDirectory('moonloader\\config\\MHelper\\Config') -- [[ Создаем директорию скрипта ]]
        inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini') 
        
    end
    downloadUrlToFile('https://pngicon.ru/file/uploads/vk-256x256.png', 'moonloader\\config\\MHelper\\Icons\\vk_ico.png')
    downloadUrlToFile('https://snipstock.com/assets/cdn/png/8fecae37e25ec3ba52facd2d7c92b1f2.png', 'moonloader\\config\\MHelper\\Icons\\tg_ico.png')
    --autoupdate("https://gist.githubusercontent.com/M0rtelli/3304b678f3bf0b05fd3487ba25cad5cc/raw", '{00FFFF}[MHelper]: ', "https://github.com/M0rtelli/New-MHelper/blob/main/%5BNEW%5D%20Mhelper.luac")
    
    image_vk_ico = imgui.CreateTextureFromFile("moonloader\\config\\MHelper\\Icons\\vk_ico.png")
    image_tg_ico = imgui.CreateTextureFromFile("moonloader\\config\\MHelper\\Icons\\tg_ico.png")

    image_vk_icon = imgui.CreateTextureFromFile("moonloader\\config\\MHelper\\Icons\\vk_icon.png")
    image_tg_ic = imgui.CreateTextureFromFile("moonloader\\config\\MHelper\\Icons\\tg_ic.png")
    bubbleBox = ChatBox(pagesize, blacklist)

    ---------[[[[ КОМАНДЫ ]]]]---------
        sampRegisterChatCommand('amenu', function()
        if main_config.amenu_config.auth_script == true then
            main_window_state.v = not main_window_state.v
            imgui.Process = main_window_state.v
        else
        end
        end)
        sampRegisterChatCommand('az', function()
            if main_config.amenu_config.auth_script == true then
                az.v = not az.v
                imgui.Process = az.v
            else
            end
        end)

        sampRegisterChatCommand('regl', function()
            if main_config.amenu_config.auth_script == true then
                reglament.v = not reglament.v
                imgui.Process = reglament.v
            else
            end
        end)

        sampRegisterChatCommand('checkip', function(arg)
            if main_config.amenu_config.auth_script == true then
                chip(arg)
            else
            end
        end)
        sampRegisterChatCommand('login', function()
			if main_config.amenu_config.auth_script == false then
				check_account()
			else
                sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Вы уже авторизованы.', 0x7948EB)
            end
		end)
        sampRegisterChatCommand('unlogin', function(arg)
            if main_config.amenu_config.auth_script == false then
                sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Вы не можете выйти из системы, так как ещё не авторизованы.', 0x7948EB)
            else
                main_config.amenu_config.auth_script = false
                inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
                thisScript():reload()
                sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Выход из системы скрипта прошёл успешно!', 0x7948EB)
                sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Для повторной авторизации введите {8A2BE2}/login.', 0x7948EB)
            end
        end)
        sampRegisterChatCommand('mypos', function()
            if main_config.amenu_config.auth_script == true then
                local x, y, z = getCharCoordinates(playerPed)
                local interior = getCharActiveInterior(playerPed)
                sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Ваши координаты: X - {8A2BE2}' .. x .. ';{FFFFFF} Y - {8A2BE2}' .. y .. ';{FFFFFF} Z - {8A2BE2}' .. z .. '.', 0x7948EB)
                if interior == 0 then
                    sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Вы не в интерьере.', 0x7948EB)
                else
                    sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}ID интерьера, в котором вы находитесь - {8A2BE2}' .. interior .. '.', 0x7948EB)
                end
            else
            end
        end)

        sampRegisterChatCommand('delcount', function(arg)
            if main_config.amenu_config.auth_script == true then
                sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Счётчик репортов успешно очищен!', 0x7948EB)
                main_config.amenu_config.otv = 0
                inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
            else
            end
        end)

        sampRegisterChatCommand('fastnakaz', function()
            sampShowDialog(1, '                  {8A2BE2}MHelper {FFFFFF}| Существующие команды.', '                  {FFFFFF}- Команды для выдачи кика -\n- {8A2BE2}/kickafkroad {FFFFFF}- AFK на дороге;\n- {8A2BE2}/kickkoika {FFFFFF}- AFK на койке;\n- {8A2BE2}/kickpomeha {FFFFFF}- Помеха;\n- {8A2BE2}/kickpomehaadm {FFFFFF}- Помеха работе администрации.\n\n                  - Команды для выдачи мута -\n- {8A2BE2}/mtmg {FFFFFF}- Метагейминг;\n- {8A2BE2}/mtcaps {FFFFFF}- Капс;\n- {8A2BE2}/mtmat {FFFFFF}- Мат;\n- {8A2BE2}/mtflood {FFFFFF}- Флуд;\n- {8A2BE2}/mttranslit {FFFFFF}- Транслит;\n- {8A2BE2}/mtosk {FFFFFF}- Оскорбление;\n- {8A2BE2}/mtnrpad {FFFFFF}- нРП /ad;\n- {8A2BE2}/mtoskadm {FFFFFF}- Оск. администрации;\n- {8A2BE2}/mtreklama {FFFFFF}- Реклама;\n- {8A2BE2}/mtruletka {FFFFFF}- Рулетка в /try.\n\n               {FFFFFF}- Команды для выдачи призона -\n- {8A2BE2}/jldmcar {FFFFFF}- ДМ Кар;\n- {8A2BE2}/jldm {FFFFFF}- ДМ;\n- {8A2BE2}/jldb {FFFFFF}- ДБ;\n- {8A2BE2}/jltk {FFFFFF}- TK;\n- {8A2BE2}/jlsk {FFFFFF}- СК;\n- {8A2BE2}/jlsbiv {FFFFFF}- Сбив;\n- {8A2BE2}/jldmzz {FFFFFF}- ДМ в ЗЗ;\n- {8A2BE2}/jlplusc {FFFFFF}- +С;\n- {8A2BE2}/jlbagouz {FFFFFF}- Багоюз;\n- {8A2BE2}/jlnrpacs {FFFFFF}- нРП аксессуар;\n- {8A2BE2}/jlnrpezda {FFFFFF}- нРП езда;\n- {8A2BE2}/jltaran {FFFFFF}- Таран;\n- {8A2BE2}/jlpomehaadm {FFFFFF}- Помеха работе администрации.\n\n                 {FFFFFF}- Команды для выдачи варна -\n- {8A2BE2}/wrnmasssk {FFFFFF}- Масс. СК;\n- {8A2BE2}/wrncplr {FFFFFF}- +С в игрока;\n- {8A2BE2}/wrnnrpcop {FFFFFF}- нРП коп;\n- {8A2BE2}/wrnpro {FFFFFF}- Нарушение ПРО;\n- {8A2BE2}/wrndmzz {FFFFFF}- Масс. ДМ в ЗЗ;\n- {8A2BE2}/wrnbagouz {FFFFFF}- Багоюз.\n\n                  {FFFFFF}- Команды для выдачи бана -\n- {8A2BE2}/bnneadekvat {FFFFFF}- Неадекватное поведение;\n- {8A2BE2}/bnmassdb {FFFFFF}- Масс. ДБ лопастями;\n- {8A2BE2}/bndmslet {FFFFFF}- ДМ на слёте;\n- {8A2BE2}/bnsmrtplr {FFFFFF}- Желание смерти игроку;\n- {8A2BE2}/bnnokr {FFFFFF}- НОКР;\n- {8A2BE2}/bnrasizm {FFFFFF}- Расизм;\n- {8A2BE2}/bnrozhig {FFFFFF}- Розжиг межнац. розни;\n- {8A2BE2}/bnblat {FFFFFF}- Блат во фракции;\n- {8A2BE2}/bnizp {FFFFFF}- ИЗП;\n- {8A2BE2}/bnobmanadm {FFFFFF}- Обман администрации;\n- {8A2BE2}/bnhrancheat {FFFFFF}- Хранение читов;\n- {8A2BE2}/bnotkaz {FFFFFF}- Отказ от проверки;\n- {8A2BE2}/bnnrprazvod {FFFFFF}- нРП развод.\n\n\n{8A2BE2}Использование: {FFFFFF}*команда* *ID игрока*\nНапример: /mtmg 20.', 'Принять', 'Закрыть', 0)
        end)
        if main_config.amenu_config.fast_nakaz == true then
            sampRegisterChatCommand('kickafkroad', function(arg)
                sampSendChat('/kick ' .. arg .. ' AFK на дороге')
            end)
            
            sampRegisterChatCommand('kickkoika', function(arg)
                sampSendChat('/kick ' .. arg .. ' AFK на койке')
            end)
            
            sampRegisterChatCommand('kickpomeha', function(arg)
                sampSendChat('/kick ' .. arg .. ' Помеха')
            end)
            
            sampRegisterChatCommand('kickpomehaadm', function(arg)
                sampSendChat('/kick ' .. arg .. ' Помеха работе администрации')
            end)
            
            sampRegisterChatCommand('mtmg', function(arg)
                sampSendChat('/mute ' .. arg .. ' 15 MG')
            end)
            
            sampRegisterChatCommand('mtcaps', function(arg)
                sampSendChat('/mute ' .. arg .. ' 25 Caps')
            end)
            
            sampRegisterChatCommand('mtmat', function(arg)
                sampSendChat('/mute ' .. arg .. ' 20 Mat')
            end)
            
            sampRegisterChatCommand('mtflood', function(arg)
                sampSendChat('/mute ' .. arg .. ' 30 Flood')
            end)
            
            sampRegisterChatCommand('mttranslit', function(arg)
                sampSendChat('/mute ' .. arg .. ' 15 Translit')
            end)
            
            sampRegisterChatCommand('mtosk', function(arg)
                sampSendChat('/mute ' .. arg .. ' 60 Osk')
            end)
            
            sampRegisterChatCommand('mtnrpad', function(arg)
                sampSendChat('/mute ' .. arg .. ' 60 nRP /ad')
            end)
            
            sampRegisterChatCommand('mtoskadm', function(arg)
                sampSendChat('/mute ' .. arg .. ' 60 Osk adm')
            end)
            
            sampRegisterChatCommand('mtreklama', function(arg)
                sampSendChat('/mute ' .. arg .. ' 120 Реклама')
            end)
            
            sampRegisterChatCommand('mtruletka', function(arg)
                sampSendChat('/mute ' .. arg .. ' 60 Рулетка в /try')
            end)
            
            sampRegisterChatCommand('jldmcar', function(arg)
                sampSendChat('/jail ' .. arg .. ' 30 DM Car')
            end)
            
            sampRegisterChatCommand('jldm', function(arg)
                sampSendChat('/jail ' .. arg .. ' 40 DM')
            end)
            
            sampRegisterChatCommand('jldb', function(arg)
                sampSendChat('/jail ' .. arg .. ' 30 DB')
            end)
            
            sampRegisterChatCommand('jltk', function(arg)
                sampSendChat('/jail ' .. arg .. ' 30 TK')
            end)
            
            sampRegisterChatCommand('jlsk', function(arg)
                sampSendChat('/jail ' .. arg .. ' 60 SK')
            end)
            
            sampRegisterChatCommand('jlsbiv', function(arg)
                sampSendChat('/jail ' .. arg .. ' 60 Sbiv')
            end)
            
            sampRegisterChatCommand('jldmzz', function(arg)
                sampSendChat('/jail ' .. arg .. ' DM in ZZ')
            end)
            
            sampRegisterChatCommand('jlplusc', function(arg)
                sampSendChat('/jail ' .. arg .. ' 90 +C')
            end)
            
            sampRegisterChatCommand('jlbagouz', function(arg)
                sampSendChat('/jail ' .. arg .. ' 90 Багоюз')
            end)
            
            sampRegisterChatCommand('jlnrpacs', function(arg)
                sampSendChat('/jail ' .. arg .. ' 30 nRP аксессуар')
            end)
            
            sampRegisterChatCommand('jlnrpezda', function(arg)
                sampSendChat('/jail ' .. arg .. ' 30 nRP езда')
            end)
            
            sampRegisterChatCommand('jltaran', function(arg)
                sampSendChat('/jail ' .. arg .. ' 30 Таран')
            end)
            
            sampRegisterChatCommand('jlpomehaadm', function(arg)
                sampSendChat('/jail ' .. arg .. ' 10 Помеха работе администрации')
            end)
            
            sampRegisterChatCommand('wrnmasssk', function(arg)
                sampSendChat('/warn ' .. arg .. ' Mass SK')
            end)
            
            sampRegisterChatCommand('wrncplr', function(arg)
                sampSendChat('/warn ' .. arg .. ' +C в игрока')
            end)
            
            sampRegisterChatCommand('wrnnrpcop', function(arg)
                sampSendChat('/warn ' .. arg .. ' nRP Cop')
            end)
            
            sampRegisterChatCommand('wrnpro', function(arg)
                sampSendChat('/warn ' .. arg .. ' Нарушение ПРО')
            end)
            
            sampRegisterChatCommand('wrndmzz', function(arg)
                sampSendChat('/warn ' .. arg .. ' Масс. ДМ в ЗЗ')
            end)
            
            sampRegisterChatCommand('wrnbagouz', function(arg)
                sampSendChat('/warn ' .. arg .. ' Багоюз')
            end)   
            
            sampRegisterChatCommand('bnneadekvat', function(arg)
                sampSendChat('/ban ' .. arg .. ' 3 Неадекватное поведение')
            end)
            
            sampRegisterChatCommand('bnmassdb', function(arg)
                sampSendChat('/ban ' .. arg .. ' 3 Масс. ДБ лопастями')
            end)
            
            sampRegisterChatCommand('bndmslet', function(arg)
                sampSendChat('/ban ' .. arg .. ' 3 ДМ на слёте')
            end)
            
            sampRegisterChatCommand('bnsmrtplr', function(arg)
                sampSendChat('/ban ' .. arg .. ' 5 Желание смерти игроку')
            end)
            
            sampRegisterChatCommand('bnnokr', function(arg)
                sampSendChat('/ban ' .. arg .. ' 15 НОКР')
            end)
            
            sampRegisterChatCommand('bnrasizm', function(arg)
                sampSendChat('/ban ' .. arg .. ' 15 Расизм')
            end)
            
            sampRegisterChatCommand('bnrozhig', function(arg)
                sampSendChat('/ban ' .. arg .. ' 15 Розжиг межнац. розни')
            end)            

            sampRegisterChatCommand('bnblat', function(arg)
                sampSendChat('/ban ' .. arg .. ' 30 Блат во фракции')
            end)
        
            sampRegisterChatCommand('bnizp', function(arg)
                sampSendChat('/ban ' .. arg .. ' 30 ИЗП')
            end)
        
            sampRegisterChatCommand('bnobmanadm', function(arg)
                sampSendChat('/ban ' .. arg .. ' 30 Обман администрации')
            end)
        
            sampRegisterChatCommand('bnhrancheat', function(arg)
                sampSendChat('/ban ' .. arg .. ' 30 Хранение читов')
            end)
        
            sampRegisterChatCommand('bnotkaz', function(arg)
                sampSendChat('/ban ' .. arg .. ' 30 Отказ от проверки')
            end)
        
            sampRegisterChatCommand('bnnrprazvod', function(arg)
                sampSendChat('/ban ' .. arg .. ' 9999 nRP развод')
            end)
        else
        end
        
    if not doesFileExist(getWorkingDirectory() .. '\\config\\MHelper\\GPS\\GPS.ini') then
        print('Отсутствует файл GPS.ini, но его скачивание уже идёт.')
        downloadUrlToFile('https://raw.githubusercontent.com/M0rtelli/STools/main/config/GPS.ini', getWorkingDirectory() .. '/config/MHelper/GPS/GPS.ini')
    end
    while true do
        -- SPEED HACK
        if isCharInAnyCar(playerPed) then
            if main_config.amenu_config.speed_hack == true then
                if isKeyDown(VK_LMENU) then
                    if getCarSpeed(storeCarCharIsInNoSave(playerPed)) * 2.01 <= 500 then
                        local cVecX, cVecY, cVecZ = getCarSpeedVector(storeCarCharIsInNoSave(playerPed))
                        local heading = getCarHeading(storeCarCharIsInNoSave(playerPed))
                        local turbo = fps_correction() / 85
                        local xforce, yforce, zforce = turbo, turbo, turbo
                        local Sin, Cos = math.sin(-math.rad(heading)), math.cos(-math.rad(heading))
                        if cVecX > -0.01 and cVecX < 0.01 then xforce = 0.0 end
                        if cVecY > -0.01 and cVecY < 0.01 then yforce = 0.0 end
                        if cVecZ < 0 then zforce = -zforce end
                        if cVecZ > -2 and cVecZ < 15 then zforce = 0.0 end
                        if Sin > 0 and cVecX < 0 then xforce = -xforce end
                        if Sin < 0 and cVecX > 0 then xforce = -xforce end
                        if Cos > 0 and cVecY < 0 then yforce = -yforce end
                        if Cos < 0 and cVecY > 0 then yforce = -yforce end
                        applyForceToCar(storeCarCharIsInNoSave(playerPed), xforce * Sin, yforce * Cos, zforce / 2, 0.0, 0.0, 0.0)
                    end
                end
            end
        end

        -- WALL HACK
        if not sampIsChatInputActive() and not sampIsDialogActive() then
            if main_config.amenu_config.wall_hack == true then
                if wh == false then
                    nameTagOn()
                    wh = true
                    sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Wall Hack активирован.', 0x7948EB)
                end
            else
                if wh ~= false then
                    nameTagOff()
                    wh = false
                    sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Wall Hack деактивирован.', 0x7948EB)
                end
            end
        end

        -- AIR BRAKE
        if main_config.amenu_config.air_brake == true then 
            if isKeyJustPressed(VK_RSHIFT) and not sampIsChatInputActive() then
                enAirBrake = not enAirBrake
                if enAirBrake then
                    local posX, posY, posZ = getCharCoordinates(playerPed)
                    airBrkCoords = {posX, posY, posZ, 0.0, 0.0, getCharHeading(playerPed)}
                end
            end
            if enAirBrake then
                if isKeyJustPressed(0xBB) then
                    printStyledString('Speed increased by 0.2', 1000, 5)
                    main_config.amenu_config.speed_airbrake = main_config.amenu_config.speed_airbrake + 0.20
                    inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
                end
                if isKeyJustPressed(0xBD) then
                    printStyledString('Speed reduced by 0.2', 1000, 5)
                    main_config.amenu_config.speed_airbrake = main_config.amenu_config.speed_airbrake - 0.20
                    inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
                end
            end
        else
            enAirBrake = false
        end
        if enAirBrake then
            if isCharInAnyCar(playerPed) then heading = getCarHeading(storeCarCharIsInNoSave(playerPed))
            else heading = getCharHeading(playerPed) end
            local camCoordX, camCoordY, camCoordZ = getActiveCameraCoordinates()
            local targetCamX, targetCamY, targetCamZ = getActiveCameraPointAt()
            local angle = getHeadingFromVector2d(targetCamX - camCoordX, targetCamY - camCoordY)
            if isCharInAnyCar(playerPed) then difference = 0.79 else difference = 1.0 end
            setCharCoordinates(playerPed, airBrkCoords[1], airBrkCoords[2], airBrkCoords[3] - difference)
            if not isSampfuncsConsoleActive() and not sampIsChatInputActive() and not sampIsDialogActive() and not isPauseMenuActive() then
                if isKeyDown(VK_W) then
                airBrkCoords[1] = airBrkCoords[1] + main_config.amenu_config.speed_airbrake * math.sin(-math.rad(angle))
                airBrkCoords[2] = airBrkCoords[2] + main_config.amenu_config.speed_airbrake * math.cos(-math.rad(angle))
                if not isCharInAnyCar(playerPed) then setCharHeading(playerPed, angle)
                else setCarHeading(storeCarCharIsInNoSave(playerPed), angle) end
                elseif isKeyDown(VK_S) then
                    airBrkCoords[1] = airBrkCoords[1] - main_config.amenu_config.speed_airbrake * math.sin(-math.rad(heading))
                    airBrkCoords[2] = airBrkCoords[2] - main_config.amenu_config.speed_airbrake * math.cos(-math.rad(heading))
                end
                if isKeyDown(VK_A) then
                    airBrkCoords[1] = airBrkCoords[1] - main_config.amenu_config.speed_airbrake * math.sin(-math.rad(heading - 90))
                    airBrkCoords[2] = airBrkCoords[2] - main_config.amenu_config.speed_airbrake * math.cos(-math.rad(heading - 90))
                elseif isKeyDown(VK_D) then
                    airBrkCoords[1] = airBrkCoords[1] - main_config.amenu_config.speed_airbrake * math.sin(-math.rad(heading + 90))
                    airBrkCoords[2] = airBrkCoords[2] - main_config.amenu_config.speed_airbrake * math.cos(-math.rad(heading + 90))
                end
                if isKeyDown(VK_SPACE) then airBrkCoords[3] = airBrkCoords[3] + main_config.amenu_config.speed_airbrake / 2.0 end
                if isKeyDown(VK_LSHIFT) and airBrkCoords[3] > -95.0 then airBrkCoords[3] = airBrkCoords[3] - main_config.amenu_config.speed_airbrake / 2.0 end

            end
        end

        -- INFINITY AMMO
        if main_config.amenu_config.inf_ammo == true then
            mem.write(0x969178, 1, 1, true)
        else
            mem.write(0x969178, 0, 1, true)
        end

        -- NO BIKE
        if main_config.amenu_config.no_bike == true then
            setCharCanBeKnockedOffBike(playerPed, true)
        else
            setCharCanBeKnockedOffBike(playerPed, false)
        end

        -- CAER INFO (HP and ID)
        if main_config.amenu_config.car_info == true then
            for k,v in ipairs(getAllVehicles()) do
                local pos = {getCarCoordinates(v)}
                local my_pos = {getCharCoordinates(playerPed)}
                local result, id = sampGetVehicleIdByCarHandle(v)
                local hp = getCarHealth(v)
                local x, y = convert3DCoordsToScreen(pos[1], pos[2], pos[3])
                if result then
                    if isCarOnScreen(v) then
                        if getDistanceBetweenCoords3d(my_pos[1], my_pos[2], my_pos[3], pos[1], pos[2], pos[3]) < main_config.amenu_config.intInfoCars then
                            renderFontDrawText(font_e, 'ID: '..id..' HP: '..hp, x, y, 0xFFFFFFFF, true)
                        end
                    end
                end
            end
        end

        -- Bubble chat 
        if main_config.amenu_config.bubble_chat == true then
            bubbleBox.active = true
            bubbleBox:toggle(bubbleBox.active)
        else
            bubbleBox.active = false
            bubbleBox:toggle(bubbleBox.active)
        end

        if bubbleBox.active and main_config.amenu_config.auth_script == true then
            bubbleBox:draw(positionX, positionY)
            if is_key_check_available() and isKeyDown(secondaryKey) then
                if getMousewheelDelta() ~= 0 then
                    bubbleBox:scroll(getMousewheelDelta() * -1)
                end
            end
        end
        -- E-menu
        if isKeyDown(69) and main_config.amenu_config.emenu and not sampIsChatInputActive() and not sampIsDialogActive() and main_config.amenu_config.auth_script == true then
            -- isKeyDown(69) do
                --wait(0)
                local player = getNearCharToCenter(150)
                local x, y = getScreenResolution()
                if player then
                    local _, playerId = sampGetPlayerIdByCharHandle(player)
                    local nick = sampGetPlayerNickname(playerId)
                    local health = getCharHealth(player)
                    local armour = getCharArmour(player)
                    renderFigure2D(x/2, y/2, 75, 160, 0xFFFFFFFF) -- нарисует круг с белой обводкой
                    local plX, plY, plZ = getBodyPartCoordinates(8, player)
                    local plsX, plsY = convert3DCoordsToScreen(plX, plY, plZ)
                    renderDrawLine(x/2, y/2, plsX, plsY, 2.0, 0xFFFFFFFF)
                    renderFontDrawText(font_e, '{FF0000}1{EEEEEE} - Войти в наблюдение', (x/2)+175, (y/2)-100, 0xEEEEEEEE)
                    renderFontDrawText(font_e, '{FF0000}2{EEEEEE} - Слапнуть', (x/2)+175, (y/2)-75, 0xEEEEEEEE)
                    renderFontDrawText(font_e, '{FF0000}3{EEEEEE} - Заспавнить', (x/2)+175, (y/2)-50, 0xEEEEEEEE)
                    renderFontDrawText(font_e, nick .. '[' .. playerId .. ']', plsX-75, plsY, 0xFFFF0000)
                    renderFontDrawText(font_e, 'HP: {FF0000}' .. health .. '{EEEEEE} | Arm: {FF0000}' .. armour .. '{EEEEEE}', (x/2)-70, (y/2)+175, 0xEEEEEEEE)
                    renderDrawPolygon(x/2, y/2, 10, 10, 8, 0, 0xFFB3FF00)
                    renderDrawPolygon(plsX, plsY, 7, 7, 5, 0, 0xFFB3FF00)

                    if isKeyJustPressed(VK_1) then
                        sampSendChat('/sp ' .. playerId)
                    end

                    if isKeyJustPressed(VK_2) then
                        sampSendChat('/slap ' .. playerId)
                    end

                    if isKeyJustPressed(VK_3) then
                        if admin_lvl.v >= 3 then
                            sampSendChat('/spawn ' .. playerId)
                        else
                            sampSendChat('/a /spawn ' .. playerId)
                        end
                    end

                end
                
            --end
        end
        -- CLICK WARP

        while isPauseMenuActive() do
            if cursorEnabled then
                showCursor(false)
            end
            wait(0)
        end
    
        if isKeyJustPressed(keyToggle_cw) and main_config.amenu_config.clickwarp and main_config.amenu_config.auth_script == true then
            cursorEnabled = not cursorEnabled
            showCursor(true)
            --while isKeyDown(keyToggle_cw) do wait(0) end
        end



        if cursorEnabled then
                if imgui.Process == false then
            local mode = sampGetCursorMode()
            if mode == 0 then
                showCursor(true)
            end
            local sx, sy = getCursorPos()
            local sw, sh = getScreenResolution()
            -- is cursor in game window bounds?
            if sx >= 0 and sy >= 0 and sx < sw and sy < sh then
                local posX, posY, posZ = convertScreenCoordsToWorld3D(sx, sy, 700.0)
                local camX, camY, camZ = getActiveCameraCoordinates()
                -- search for the collision point
                local result, colpoint = processLineOfSight(camX, camY, camZ, posX, posY, posZ, true, true, false, true, false, false, false)
                if result and colpoint.entity ~= 0 then
                local normal = colpoint.normal
                local pos = Vector3D(colpoint.pos[1], colpoint.pos[2], colpoint.pos[3]) - (Vector3D(normal[1], normal[2], normal[3]) * 0.1)
                local zOffset = 300
                if normal[3] >= 0.5 then zOffset = 1 end
                -- search for the ground position vertically down
                local result, colpoint2 = processLineOfSight(pos.x, pos.y, pos.z + zOffset, pos.x, pos.y, pos.z - 0.3,
                    true, true, false, true, false, false, false)
                if result then
                    pos = Vector3D(colpoint2.pos[1], colpoint2.pos[2], colpoint2.pos[3] + 1)
        
                    local curX, curY, curZ  = getCharCoordinates(playerPed)
                    local dist              = getDistanceBetweenCoords3d(curX, curY, curZ, pos.x, pos.y, pos.z)
                    local hoffs             = renderGetFontDrawHeight(font)
        
                    sy = sy - 2
                    sx = sx - 2
                    renderFontDrawText(font, string.format("%0.2fm", dist), sx, sy - hoffs, 0xEEEEEEEE)
        
                    local tpIntoCar = nil
                    if colpoint.entityType == 2 then
                    local car = getVehiclePointerHandle(colpoint.entity)
                    if doesVehicleExist(car) and (not isCharInAnyCar(playerPed) or storeCarCharIsInNoSave(playerPed) ~= car) then
                        displayVehicleName(sx, sy - hoffs * 2, getNameOfVehicleModel(getCarModel(car)))
                        local color = 0xAAFFFFFF
                        if isKeyDown(VK_RBUTTON) then
                        tpIntoCar = car
                        color = 0xFFFFFFFF
                        end
                        renderFontDrawText(font2, "Hold right mouse button to teleport into the car", sx, sy - hoffs * 3, color)
                    end
                    end
        
                    createPointMarker(pos.x, pos.y, pos.z)
        
                    -- teleport!
                    if isKeyDown(keyApply) then
                    if tpIntoCar then
                        if not jumpIntoCar(tpIntoCar) then
                        -- teleport to the car if there is no free seats
                        teleportPlayer(pos.x, pos.y, pos.z)
                        end
                    else
                        if isCharInAnyCar(playerPed) then
                        local norm = Vector3D(colpoint.normal[1], colpoint.normal[2], 0)
                        local norm2 = Vector3D(colpoint2.normal[1], colpoint2.normal[2], colpoint2.normal[3])
                        rotateCarAroundUpAxis(storeCarCharIsInNoSave(playerPed), norm2)
                        pos = pos - norm * 1.8
                        pos.z = pos.z - 0.8
                        end
                        teleportPlayer(pos.x, pos.y, pos.z)
                    end
                    removePointMarker()
        
                    --while isKeyDown(keyApply) do wait(0) end
                    showCursor(false)
                end
            end
            end
        end
        end
        end
        wait(0)
        if main_config.amenu_config.count_rep == true then
            renderFontDrawText(my_font, '{FFFFFF}- Отвеченные репорты: {8A2BE2}' .. otveti .. '.', 10, 385, 0xFFFFFFFF)
        end
		doKeyCheck()
        removePointMarker()

        if isKeyJustPressed(0x72) then
            if main_config.amenu_config.auth_script == true then
                main_window_state.v = not main_window_state.v
                imgui.Process = main_window_state.v
            else
            end
        end

        if isKeyJustPressed(VK_O) and not sampIsChatInputActive() and not sampIsDialogActive() and main_config.amenu_config.auth_script == true then
            if new_form ~= nil then
                sampSendChat(new_form)
                printStyledString('Success!', 2000, 2)
                new_form = nil
            else
                printStyledString('None form', 2000, 2)
            end
        end

        if sampIsLocalPlayerSpawned() then
            is_auth = true
        end

        if isKeyJustPressed(VK_U) and not sampIsChatInputActive() and not sampIsDialogActive() and main_config.amenu_config.auth_script == true then
            sampSetChatInputEnabled(true)
            sampSetChatInputText('/mute ' .. id_report_adv .. ' 120 Упом. родных')
        end

            -- добавить включение тексдравов в /amenu

        for i = 151, 168 do
            if sampTextdrawIsExists(i) then
                sampTextdrawDelete(i)
            end
        end
        
    end
end

function fps_correction()
	return representIntAsFloat(readMemory(0xB7CB5C, 4, false))
end

function check_account()
    local ffi = require("ffi")
    ffi.cdef[[
    int __stdcall GetVolumeInformationA(
        const char* lpRootPathName,
        char* lpVolumeNameBuffer,
        uint32_t nVolumeNameSize,
        uint32_t* lpVolumeSerialNumber,
        uint32_t* lpMaximumComponentLength,
        uint32_t* lpFileSystemFlags,
        char* lpFileSystemNameBuffer,
        uint32_t nFileSystemNameSize
    );
    ]]
    serial = ffi.new("unsigned long[1]", 0)
    ffi.C.GetVolumeInformationA(nil, nil, 0, serial, nil, nil, nil, 0)
    serial = tostring(serial[0])
    login_script.v = tostring(serial)
    get_gist("https://gist.githubusercontent.com/Nightmare352/5994f9ac5bc87698919b80f61b1c6b74/raw/", '{00FFFF}[MHelper]: ')
end



function get_gist(json_url, prefix)
  local dlstatus = require('moonloader').download_status
  local json = getWorkingDirectory() .. '\\'..thisScript().name..'-gist.json'
  if doesFileExist(json) then os.remove(json) end
  downloadUrlToFile(json_url, json,
    function(id, status, p1, p2)
      if status == dlstatus.STATUSEX_ENDDOWNLOAD then
        if doesFileExist(json) then
          local f = io.open(json, 'r')
          if f then
            local info = decodeJson(f:read('*a'))
            for k,v in pairs(info) do
                if k == serial then
                    password_script_from_json = tostring(v)
                end
            end
            if main_config.amenu_config.password_of_script == password_script_from_json then
                if main_config.amenu_config.password_of_script ~= '' then
                    is_script_auth = true
                else
                    check_script.v = not check_script.v
                    imgui.Process = check_script.v
                end
            else
                check_script.v = not check_script.v
                imgui.Process = check_script.v
            end
            f:close()
            os.remove(json)
          end
        else
          print('v' .. thisScript().version .. ': Не могу проверить.')
          update = false
        end
      end
    end
  )

end



  
  -----<< АВТО-ОБНОВЛЕНИЕ СКРИПТА >>-----

--[[function autoupdate(json_url, prefix, url)
    local dlstatus = require('moonloader').download_status
    local json = getWorkingDirectory() .. '\\'..thisScript().name..'-version.json'
    if doesFileExist(json) then os.remove(json) end
    downloadUrlToFile(json_url, json,
    function(id, status, p1, p2)
        if status == dlstatus.STATUSEX_ENDDOWNLOAD then
        if doesFileExist(json) then
            local f = io.open(json, 'r')
            if f then
            local info = decodeJson(f:read('*a'))
            updatelink = info.updateurl
            updateversion = info.latest
            f:close()
            os.remove(json)
            if updateversion ~= thisScript().version then
                lua_thread.create(function(prefix)
                local dlstatus = require('moonloader').download_status
                local color = -1
                sampAddChatMessage((prefix..'Обнаружено обновление. Пытаюсь обновиться c {EE82EE}'..thisScript().version..'{00FFFF} на {EE82EE}'..updateversion), color)
                wait(250)
                downloadUrlToFile(updatelink, thisScript().path,
                    function(id3, status1, p13, p23)
                    if status1 == dlstatus.STATUS_DOWNLOADINGDATA then
                        print(string.format('Загружено %d из %d.', p13, p23))
                    elseif status1 == dlstatus.STATUS_ENDDOWNLOADDATA then
                        print('Загрузка обновления завершена.')
                        sampAddChatMessage((prefix..'Обновление завершено!'), color)
                        imgui.ShowCursor = false
                        goupdatestatus = true
                        lua_thread.create(function() wait(500) thisScript():reload() end)
                    end
                    if status1 == dlstatus.STATUSEX_ENDDOWNLOAD then
                        if goupdatestatus == nil then
                        sampAddChatMessage((prefix..'Обновление прошло неудачно. Запускаю устаревшую версию..'), color)
                        update = false
                        end
                    end
                    end
                )
                end, prefix
                )
            else
                update = false
                local netreb = string.format("{EE82EE}v"..thisScript().version.." MHelper'a{1E90FF} Обновление не требуется.")
                sampAddChatMessage(netreb, 0x1E90FF)
            end
            end
        else
            print('v'..thisScript().version..': Не могу проверить обновление. Смиритесь или проверьте самостоятельно на '..url)
            update = false
        end
        end
    end
    )
    while update ~= false do wait(100) end
end]]--


-----<< НАСТРОЙКА ИМГУИ >>-----
local fontsize = nil
local zagolovok = nil
local fontsize_small = nil
local font_test = nil
local font_medium = nil
function imgui.BeforeDrawFrame()
    if fontsize == nil then
        fontsize = imgui.GetIO().Fonts:AddFontFromFileTTF(getFolderPath(0x14) .. '\\trebucbd.ttf', 24.0, nil, imgui.GetIO().Fonts:GetGlyphRangesCyrillic()) -- вместо 30 любой нужный размер
    end
    if font_medium == nil then
        font_medium = imgui.GetIO().Fonts:AddFontFromFileTTF(getFolderPath(0x14) .. '\\trebucbd.ttf', 18.0, nil, imgui.GetIO().Fonts:GetGlyphRangesCyrillic()) -- вместо 30 любой нужный размер
    end
    if fontsize_small == nil then
        fontsize_small = imgui.GetIO().Fonts:AddFontFromFileTTF(getFolderPath(0x14) .. '\\trebucbd.ttf', 11.0, nil, imgui.GetIO().Fonts:GetGlyphRangesCyrillic()) -- вместо 30 любой нужный размер
    end
    if font_test == nil then
        font_test = imgui.GetIO().Fonts:AddFontFromFileTTF(getFolderPath(0x14) .. '\\trebucbd.ttf', 17.0, nil, imgui.GetIO().Fonts:GetGlyphRangesCyrillic()) -- вместо 30 любой нужный размер
    end
    if zagolovok == nil then
        zagolovok = imgui.GetIO().Fonts:AddFontFromFileTTF(getFolderPath(0x14) .. '\\trebucbd.ttf', 20.0, nil, imgui.GetIO().Fonts:GetGlyphRangesCyrillic()) -- вместо 30 любой нужный размер
    end
end

-----<< НАЧАЛО ИМГУИ ОКОН >>-----
function imgui.OnDrawFrame()
    local entered_text = sampGetCurrentDialogEditboxText()
    if not main_window_state.v and not recon_menu.v and not az.v and not add_zone.v and not report.v and not gps_help.v and not check_ip.v and not check_script.v and not reglament.v then
        imgui.Process = false
    end
    if not main_config.amenu_config.auth_script == true then
        if main_window_state.v and recon_menu.v and az.v and add_zone.v and report.v and gps_help.v and check_ip.v and reglament.v then
            imgui.Process = false
        end
    end

    ---< НАСТРОЙКА ОСНОВНОГО МЕНЮ >---      +++ ГОТОВО +++
    if main_window_state.v then
        bluetheme()
        local X, Y = getScreenResolution()
        imgui.SetNextWindowSize(imgui.ImVec2(650, 407), imgui.Cond.FirstUseEver)
        imgui.SetNextWindowPos(imgui.ImVec2(X / 2, Y / 2), imgui.Cond.FirstUseEver, imgui.ImVec2(0.5, 0.5))
        imgui.Begin(u8'MHelper | Main Menu.', main_window_state, imgui.WindowFlags.NoCollapse + imgui.WindowFlags.NoResize + imgui.WindowFlags.NoScrollbar)
            local width = imgui.GetWindowWidth()
            imgui.SetCursorPosX(30)
            imgui.PushFont(fontsize)
                for i, title in ipairs(navigation.list) do
                    if HeaderButton(navigation.current == i, title) then
                        navigation.current = i
                    end
                    if i ~= #navigation.list then
                        imgui.SameLine(nil, 30)
                    end
                end
            imgui.PopFont()
            imgui.BeginChild('##render', imgui.ImVec2(638, 346), true, imgui.WindowFlags.NoScrollbar)
                if navigation.current == 0 then
                    imgui_privetstvie()
                end
                if navigation.current == 1 then
                    imgui_settings()
                end
                if navigation.current == 2 then
                    imgui_commands()
                end
                if navigation.current == 3 then
                    imgui_donate()
                end
                if navigation.current == 4 then
                    imgui_about()
                end
            imgui.EndChild()
        imgui.End()
    end

    ---< НАСТРОЙКА ТЕЛЕПОРТ-МЕНЮ >---      +++ ГОТОВО +++
    if az.v then
        bluetheme()
        local X, Y = getScreenResolution()
        imgui.SetNextWindowSize(imgui.ImVec2(512, 283), imgui.Cond.FirstUseEver)
        imgui.SetNextWindowPos(imgui.ImVec2(X / 2.5, Y / 2), imgui.Cond.FirstUseEver, imgui.ImVec2(0.5, 0.5))
        imgui.Begin(u8"MHelper | Teleport Menu.", az, imgui.WindowFlags.NoCollapse + imgui.WindowFlags.NoResize + imgui.WindowFlags.NoScrollbar)
            imgui.BeginChild('##tmenu', imgui.ImVec2(146, 251), true)
                if imgui.Button(u8("Организации"), imgui.ImVec2(133, 46)) then 
                    tMenu = 1
                end
                if imgui.Button(u8("Интерьеры"), imgui.ImVec2(133, 46)) then 
                    tMenu = 2
                end
                if imgui.Button(u8("Крыши"), imgui.ImVec2(133, 46)) then
                    tMenu = 3
                end
                if imgui.Button(u8'Добавленные места', imgui.ImVec2(133, 46)) then
                    tMenu = 4
                end
                imgui.Separator()
                if imgui.Button(u8'Добавить своё место', imgui.ImVec2(133, 37)) then
                    az.v = not az.v
                    add_zone.v = not add_zone.v
                    imgui.Process = add_zone.v
                end
            imgui.EndChild()
            imgui.SameLine()
            imgui.BeginChild("##select_place", imgui.ImVec2(350, 251), true, imgui.WindowFlags.NoScrollbar)
                if tMenu == 1 then 
                    for k,v in pairs(teleports[1]) do 
                        if imgui.Button(u8(teleports[1][k][1]), imgui.ImVec2(338, 0)) then 
                            setCharCoordinates(playerPed, teleports[1][k][2], teleports[1][k][3], teleports[1][k][4])
                        end
                    end
                elseif tMenu == 2 then 
                    for k,v in pairs(teleports[2]) do 
                        if imgui.Button(u8(teleports[2][k][1]), imgui.ImVec2(338, 0)) then 
                            setInterior(tonumber(teleports[2][k][5]))
                            setCharCoordinates(playerPed, teleports[2][k][2], teleports[2][k][3], teleports[2][k][4])
                        end
                    end
                elseif tMenu == 3 then 
                    if imgui.CollapsingHeader("Los-Santos") then 
                        for k,v in pairs(teleports[3][1]) do 
                            if imgui.Button(u8("Крыша №"..k), imgui.ImVec2(338, 0)) then 
                                setCharCoordinates(playerPed, teleports[3][1][k][1], teleports[3][1][k][2], teleports[3][1][k][3])
                            end
                        end
                    end
                    if imgui.CollapsingHeader("San-Fierro") then 
                        for k,v in pairs(teleports[3][2]) do 
                            if imgui.Button(u8("Крыша №"..k), imgui.ImVec2(338, 0)) then 
                                setCharCoordinates(playerPed, teleports[3][2][k][1], teleports[3][2][k][2], teleports[3][2][k][3])
                            end
                        end
                    end
                    if imgui.CollapsingHeader("Las-Venturas") then 
                        for k,v in pairs(teleports[3][3]) do 
                            if imgui.Button(u8("Крыша №"..k), imgui.ImVec2(338, 0)) then 
                                setCharCoordinates(playerPed, teleports[3][3][k][1], teleports[3][3][k][2], teleports[3][3][k][3])
                            end
                        end
                    end
                elseif tMenu == 4 then
                    for name, coord in pairs(adm_zone.az) do
                        local x, y, z, interior_id = coord:match("(.*),(.*),(.*), INT: (%d+)")
                        if filter == "" then
                            if imgui.Button(name, imgui.ImVec2(338, 0)) then
                                setCharCoordinates(playerPed, tonumber(x), tonumber(y), tonumber(z), interior_id)
                            end
                        else
                            if string.upper(name):find(string.upper(filter)) ~= nil then
                                if imgui.Button(name, imgui.ImVec2(338, 0)) then
                                    setCharCoordinates(playerPed, tonumber(x), tonumber(y), tonumber(z), interior_id)
                                end
                            end
                        end
                    end
                end
            imgui.EndChild()

        imgui.End()
    end

    ---< НАСТРОЙКА МЕНЮ ДОБАВЛЕНИЯ ЛОКАЦИЙ >---      +++ ГОТОВО +++
    if add_zone.v then
        bluetheme()
        local X, Y = getScreenResolution()
        imgui.SetNextWindowSize(imgui.ImVec2(500, 210), imgui.Cond.FirstUseEver)
        imgui.SetNextWindowPos(imgui.ImVec2(X / 3, Y / 2), imgui.Cond.FirstUseEver, imgui.ImVec2(0.5, 0.5))
        imgui.Begin(u8"MHelper | Add Custom Location.", add_zone, imgui.WindowFlags.NoCollapse + imgui.WindowFlags.NoResize + imgui.WindowFlags.NoScrollbar)
            imgui.CenterText(u8'Введите координаты места, которое хотите добавить,')
            imgui.CenterText(u8'и, если это нужно, ID интерьера.')
            imgui.SameLine()
            imgui.TextDisabled('(?)')
            imgui.Hint(u8'- Если ваше место находится НЕ в интерьере, то поставьте значение 0.', 0)
            imgui.Columns(4, _, true)
                imgui.Separator()
                imgui.PushItemWidth(95)
                    imgui.InputText('X', Xinput)
                imgui.PopItemWidth()
            imgui.NextColumn()
                imgui.PushItemWidth(95)
                    imgui.InputText('Y', Yinput)
                imgui.PopItemWidth()
            imgui.NextColumn()
                imgui.PushItemWidth(95)
                    imgui.InputText('Z', Zinput)
                imgui.PopItemWidth()
            imgui.NextColumn() 
            imgui.PushItemWidth(75)
                imgui.InputText('ID int', intInput)
            imgui.PopItemWidth()
            imgui.Columns(1, _, true)
            imgui.Separator()
            imgui.CenterText(u8'Введите название места, которое хотите добавить.')
            imgui.PushItemWidth(488)
                imgui.InputText('##name', nameint)
            imgui.PopItemWidth()
            imgui.Separator()
            if imgui.Button(u8'Добавить', imgui.ImVec2(488, 30)) then
                local xitog = tonumber(Xinput.v)
                local yitog = tonumber(Yinput.v)
                local zitog = tonumber(Zinput.v)
                local intitog = tonumber(intInput.v)
                local nameintitog = ''
                if nameint.v == '' then
                    nameintitog = 'New AZ'
                else
                    nameintitog = nameint.v
                end
                if xitog == nil or yitog == nil or zitog == nil or intitog == nil then
                    sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Данные введены некорректно.', 0x7948EB)
                    
                else
                    local itog = string.format(xitog .. ',' .. yitog .. ',' .. zitog .. ', INT: ' .. intitog)
                    adm_zone.az[nameintitog] = itog
                    inicfg.save(admin_zone, 'MHelper\\Config\\admin_zones.ini')
                    sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Вы успешно добавили новую локацию в телепорт-меню.', 0x7948EB)
                    add_zone.v = false
                    az.v = true
                end
            end
            if imgui.Button(u8'Закрыть', imgui.ImVec2(242, 30)) then
                add_zone.v = not add_zone.v
            end
            imgui.SameLine()
            if imgui.Button(u8'Вернуться', imgui.ImVec2(242, 30)) then
                add_zone.v = false
                az.v = true
            end
        imgui.End()
    end

    ---< НАСТРОЙКА МЕНЮ РЕКОНА >---
    if recon_menu.v then
        bluetheme()
        local X, Y = getScreenResolution()
        --общая длина окна
        local abc --[[x]] = 332
        local acb --[[y]] = 218
        --cредний чайлд
        local bca --[[x]] = 320
        local bac --[[y]] = 124
        if veh_spec ~= '' then
            bac = 153
            acb = 247
        end
        imgui.SetNextWindowSize(imgui.ImVec2(abc, acb), imgui.Cond.FirstUseEver)
        imgui.SetNextWindowPos(imgui.ImVec2(X / 2.85, Y / 1.25), imgui.Cond.FirstUseEver, imgui.ImVec2(0.5, 0.5))
        imgui.Begin(u8'MHelper | Recon Menu.', recon_menu, imgui.WindowFlags.NoTitleBar + imgui.WindowFlags.NoResize)
            imgui.BeginChild('##sppp', imgui.ImVec2(320, 37), true)
                if imgui.Button(u8'<- Предыдущий игрок', imgui.ImVec2(152, 25)) then
                    sampSendChat('/sp ' .. tonumber(player_spec) - 1)
                end
                imgui.SameLine()
                if imgui.Button(u8'Следующий игрок ->', imgui.ImVec2(152, 25)) then
                    sampSendChat('/sp ' .. tonumber(player_spec) + 1)
                end
            imgui.EndChild()
            imgui.BeginChild('##buttons', imgui.ImVec2(bca, bac), true)
                if imgui.Button(u8'Mute', imgui.ImVec2(74, 25)) then
                    sampSetChatInputEnabled(true)
                    sampSetChatInputText('/mute ' .. player_spec .. ' ')
                end
                imgui.SameLine()
                if imgui.Button(u8'Kick', imgui.ImVec2(74, 25)) then
                    sampSetChatInputEnabled(true)
                    sampSetChatInputText('/kick ' .. player_spec .. ' ')
                end
                imgui.SameLine()
                if imgui.Button(u8'Warn', imgui.ImVec2(74, 25)) then
                    sampSetChatInputEnabled(true)
                    if admin_lvl.v >= 3 then
                        sampSetChatInputText('/warn ' .. player_spec .. ' ')
                    else
                        sampSetChatInputText('/a /warn ' .. player_spec .. ' ')
                    end
                end
                imgui.SameLine()
                if imgui.Button(u8'Ban', imgui.ImVec2(74, 25)) then
                    sampSetChatInputEnabled(true)
                    if admin_lvl.v >= 3 then
                        sampSetChatInputText('/ban ' .. player_spec .. ' ')
                    else
                        sampSetChatInputText('/a /ban ' .. player_spec .. ' ')
                    end
                end          
                if imgui.Button(u8'/get', imgui.ImVec2(74, 25)) then
                    if admin_lvl.v >= 4 then
                        sampSendChat('/get ' .. player_spec)
                    else
                        sampSendChat('/a /get ' .. player_spec)
                    end
                end
                imgui.SameLine()
                if imgui.Button(u8'Check IP', imgui.ImVec2(74, 25)) then
                    chip(ip_sp)
                end
                imgui.SameLine()
                if imgui.Button(u8'Update', imgui.ImVec2(74, 25)) then
                    sampSendChat('/sp ' .. player_spec)
                end
                imgui.SameLine()

                if imgui.Button(u8'Version', imgui.ImVec2(74, 25)) then
                    sampSendChat('/version ' .. player_spec)
                end
                if imgui.Button(u8'Slap', imgui.ImVec2(74, 25)) then
                    sampSendChat('/slap ' .. player_spec)
                end    
                imgui.SameLine()
                if imgui.Button(u8'Stats', imgui.ImVec2(74, 25)) then
                    if admin_lvl.v >= 2 then
                        sampSendChat('/stats ' .. player_spec)
                    else
                        sampSetChatInputEnabled(true)
                        sampSetChatInputText('/a /stats ' .. player_spec .. ', ')
                    end
                end
                imgui.SameLine()
                if imgui.Button(u8'Spawn', imgui.ImVec2(74, 25)) then
                    if admin_lvl.v >= 3 then
                        sampSendChat('/spawn ' .. player_spec)
                    else
                        sampSendChat('/a /spawn ' .. player_spec)
                    end
                end
                imgui.SameLine()
                if imgui.Button(u8'Вы тут?', imgui.ImVec2(74, 25)) then
                    sampSendChat('/pm ' .. player_spec .. ' Вы тут? Ответ в /n')
                end
                if veh_spec ~= '' then
                    if imgui.Button('/fv', imgui.ImVec2(100, 25)) then
                        sampSendChat('/fv ' .. veh_spec)
                    end
                    imgui.SameLine()
                    if imgui.Button('/sveh', imgui.ImVec2(100, 25)) then
                        sampSendChat('/sveh ' .. player_spec)
                    end
                    imgui.SameLine()
                    if imgui.Button('/spcarid', imgui.ImVec2(100, 25)) then
                        sampSendChat('/spcarid ' .. veh_spec)
                    end
                end
                if imgui.Button(u8'ТП к игроку', imgui.ImVec2(152, 25)) then
                    lua_thread.create(function()
                        if admin_lvl.v >= 2 then
                            sampSendChat('/spoff')
                            wait(650)
                            sampSendChat('/goto ' .. player_spec)
                        else
                            local _, handle = sampGetCharHandleBySampPlayerId(player_spec)
                            local x, y, z = getCharCoordinates(handle)
                            local interior = getCharActiveInterior(handle)
                            sampSendChat('/spoff')
                            wait(650)
                            setCharInterior(PLAYER_PED,interior_id)
                            setInteriorVisible(interior_id)
                            clearExtraColours(true)
                            requestCollision(x,y)
                            loadScene(x,y,z)
                            activateInteriorPeds(true)
                            teleport(x, y, z)
                        end
                    end)  
                end
                imgui.SameLine()
                if imgui.Button(u8'ТП игрока', imgui.ImVec2(152, 25)) then
                    lua_thread.create(function()
                        sampSendChat('/spoff')
                        wait(650)
                        sampSendChat('/gethere ' .. player_spec)
                    end)
                end
            imgui.EndChild()
            imgui.BeginChild('##twobuttons', imgui.ImVec2(320, 37), true)
                if imgui.Button(u8'Приятной игры', imgui.ImVec2(152, 25)) then
                    lua_thread.create(function()
                        sampSendChat('/pm ' .. player_spec .. ' Приятной игры!')
                    end)
                end
                imgui.SameLine()
                if imgui.Button(u8'Выйти из рекона', imgui.ImVec2(152, 25)) then
                    sampSendChat('/spoff')
                end
            imgui.EndChild()
        imgui.End()
    end

    ---< НАСТРОЙКА МЕНЮ КАСТОМНОГО РЕПОРТА >---      +++ ГОТОВО +++
    local qew = 184
    if report_id ~= '' then
        qew = 207
    end
    if report.v then
        if custom_report_imgui.v then
            local X, Y = getScreenResolution()
            imgui.SetNextWindowSize(imgui.ImVec2(450, qew), imgui.Cond.FirstUseEver)
            imgui.SetNextWindowPos(imgui.ImVec2(X / 2.8, Y / 2), imgui.Cond.FirstUseEver, imgui.ImVec2(0.5, 0.5))
            imgui.Begin(u8'MHelper | Report Menu.', report, imgui.WindowFlags.NoCollapse + imgui.WindowFlags.NoResize + imgui.WindowFlags.NoScrollbar)
                report_imgui()
            imgui.End()
        end
    end

    ---< НАСТРОЙКА МЕНЮ ЧЕКЕРА АЙПИ >---       +++ ГОТОВО +++
    if check_ip.v then
        local X, Y = getScreenResolution()
        imgui.SetNextWindowSize(imgui.ImVec2(313, 379), imgui.Cond.FirstUseEver)
        imgui.SetNextWindowPos(imgui.ImVec2(X / 2.8, Y / 2.7), imgui.Cond.FirstUseEver, imgui.ImVec2(0.5, 0.5))
        imgui.Begin(u8'MHelper | IP Checker.', check_ip, imgui.WindowFlags.NoCollapse + imgui.WindowFlags.NoResize + imgui.WindowFlags.NoScrollbar)
            bluetheme()
            imgui.InputTextMultiline("##мда", ip_info, imgui.ImVec2(300, 300))
            imgui.BeginChild('##buttons324', imgui.ImVec2(300, 42), true)
                if imgui.Button(u8'Отправить в админ.чат', imgui.ImVec2(149, 30)) then
                    lua_thread.create(function()
                        for i = 1, #rdata do
                            if i > 1 then
                                wait(1000)
                                sampSendChat('/a ------------------------')
                            end
                            wait(1000)
                            sampSendChat('/a IP - ' .. rdata[i]["query"])
                            wait(1000)
                            sampSendChat('/a Страна - ' .. rdata[i]["country"])
                            wait(1000)
                            sampSendChat('/a Город - ' .. rdata[i]["city"])
                            wait(1000)
                            sampSendChat('/a Провайдер - ' .. rdata[i]["isp"])
                            if i > 1 then
                                wait(1000)
                                sampSendChat('/a Дистанция - ' .. distances)
                            end
                        end
                    end)
                end
                imgui.SameLine()
                if imgui.Button(u8'Отправить в чат', imgui.ImVec2(135, 30)) then
                    lua_thread.create(function()
                        for i = 1, #rdata do
                            if i > 1 then
                                wait(1000)
                                sampSendChat('------------------------')
                            end
                            wait(1000)
                            sampSendChat('IP - ' .. rdata[i]["query"])
                            wait(1000)
                            sampSendChat('Страна - ' .. rdata[i]["country"])
                            wait(1000)
                            sampSendChat('Город - ' .. rdata[i]["city"])
                            wait(1000)
                            sampSendChat('Провайдер - ' .. rdata[i]["isp"])
                            if i > 1 then
                                wait(1000)
                                sampSendChat('Дистанция - ' .. distances)
                            end
                        end
                    end)
                end
            imgui.EndChild()
        imgui.End()
    end
    
    if check_script.v then
        bluetheme()
        local X, Y = getScreenResolution()
        imgui.SetNextWindowSize(imgui.ImVec2(450, 235), imgui.Cond.FirstUseEver)
        imgui.SetNextWindowPos(imgui.ImVec2(X / 2, Y / 1.6), imgui.Cond.FirstUseEver, imgui.ImVec2(0.5, 0.5))
        imgui.Begin(u8"MHelper | Login In Script.", check_script, imgui.WindowFlags.NoCollapse + imgui.WindowFlags.NoResize + imgui.WindowFlags.NoScrollbar)
            imgui.BeginChild('##inputi', imgui.ImVec2(437, 137), true)
                imgui.CenterText(u8'Ваш логин от скрипта:')
                imgui.PushItemWidth(425)
                    imgui.InputText(u8"##Ваш логин скрипта", login_script)
                imgui.PopItemWidth()
                imgui.CenterText(u8'Введите Ваш пароль от скрипта:')
                imgui.PushItemWidth(425)
                    imgui.InputText(u8"Введите пароль скрипта", password_script)
                imgui.PopItemWidth()
                imgui.Separator()
                imgui.SetCursorPosY(96)
                if imgui.Button(u8'Войти в систему', imgui.ImVec2(425, 35)) then
                    if password_script_from_json == '' then
                        sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Невозможно авторизоваться, так как Ваш пароль ещё не сгенерирован.', 0x7948EB)
                        sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Попытайтесь снова через несколько часов.', 0x7948EB)
                    else
                        if serial ~= login_script.v then
                            sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Логин не соответствует Вашему. Вероятно, Вы попытались заменить его на чужой.', 0x7948EB)
                        else
                            if password_script.v == password_script_from_json then
                                sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Вы успешно авторизовались! Скрипт в вашем распоряжении! {8A2BE2}(/amenu).', 0x7948EB)
                                main_config.amenu_config.auth_script = true
                                inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')	
                                check_script.v = not check_script.v
                                imgui.Process = false
                                main_config.amenu_config.password_of_script = password_script.v
                                inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
                            else
                                sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Вы ввели неверный пароль. Перепроверьте его правильность.', 0x7948EB)
                            end
                        end
                    end
                end
            imgui.EndChild()
            imgui.BeginChild('##send_parol', imgui.ImVec2(437, 61), true)
                imgui.CenterText(u8'Отправьте свой логин разработчику, чтобы он выдал Вам пароль:')
                if imgui.DegradeButton(u8'Отправить логин разработчику', imgui.ImVec2(425, 30)) then
                    local _, id = sampGetPlayerIdByCharHandle(PLAYER_PED)
                    VKMessage_login(365382457, 215537409, u8'- Логин: ' .. tostring(serial) .. '.', "4d282125e4445e7ce6b66df452a94ebc2226a77cd1dcb525480204a039cf4960284b949c94cd1cb3002d0")
                end
            imgui.EndChild()
        imgui.End()
    end

    ---< НАСТРОЙКА МЕНЮ GPS >---       +++ ГОТОВО +++
    if gps_help.v then
        local X, Y = getScreenResolution()
        imgui.SetNextWindowSize(imgui.ImVec2(337, 403), imgui.Cond.FirstUseEver)
        imgui.SetNextWindowPos(imgui.ImVec2(X / 2.8, Y / 2.2), imgui.Cond.FirstUseEver, imgui.ImVec2(0.5, 0.5))
        imgui.Begin(u8'MHelper | GPS Menu.', gps_help, imgui.WindowFlags.NoCollapse + imgui.WindowFlags.NoResize + imgui.WindowFlags.NoScrollbar)
            bluetheme()
            lua_thread.create(function()
                dialog_status = true
                enableDialog(true)
                imgui.BeginChild('##GPS', imgui.ImVec2(325, 337), true, imgui.WindowFlags.NoScrollbar)
                    if imgui.CollapsingHeader(u8'Важные места') then
                        for i=1, #all.vazhnoe do
                            if imgui.Button(u8(all.vazhnoe[i]), imgui.ImVec2(313, 24)) then
                                sampSetCurrentDialogEditboxText(entered_text .. '/gps -> 1. Важные места -> ' .. all.vazhnoe[i])
                            end
                        end
                    end
                    if imgui.CollapsingHeader(u8'Работы') then
                        for i=1, #all.raboti do
                            if imgui.Button(u8(all.raboti[i]), imgui.ImVec2(313, 24)) then
                                sampSetCurrentDialogEditboxText(entered_text .. '/gps -> 2. Работы -> ' .. all.raboti[i])
                            end
                        end
                    end
                    if imgui.CollapsingHeader(u8'Официальные организации') then
                        for i=1, #all.gosski do
                            if imgui.Button(u8(all.gosski[i]), imgui.ImVec2(313, 24)) then
                                sampSetCurrentDialogEditboxText(entered_text .. '/gps -> 3. Офиц. орг. -> ' .. all.gosski[i])
                            end
                        end
                    end
                    if imgui.CollapsingHeader(u8'Нелегальные организации') then
                        for i=1, #all.nelegal do
                            if imgui.Button(u8(all.nelegal[i]), imgui.ImVec2(313, 24)) then
                                sampSetCurrentDialogEditboxText(entered_text .. '/gps -> 4. Нелег. орг. -> ' .. all.nelegal[i])
                            end
                        end
                    end
                    if imgui.CollapsingHeader(u8'Автосалоны и автосервисы') then
                        for i=1, #all.avto do
                            if imgui.Button(u8(all.avto[i]), imgui.ImVec2(313, 24)) then
                                sampSetCurrentDialogEditboxText(entered_text .. '/gps -> 5. Автосалоны -> ' .. all.avto[i])
                            end
                        end
                    end
                    if imgui.CollapsingHeader(u8'Прочее') then
                        for i=1, #all.prochee do
                            if imgui.Button(u8(all.prochee[i]), imgui.ImVec2(313, 24)) then
                                sampSetCurrentDialogEditboxText(entered_text .. '/gps -> 6. Прочее -> ' .. all.prochee[i])
                            end
                        end
                    end
                    if imgui.CollapsingHeader(u8'Поиск мест') then
                        for i=1, #all.poisk do
                            if imgui.Button(u8(all.poisk[i]), imgui.ImVec2(313, 24)) then
                                sampSetCurrentDialogEditboxText(entered_text .. '/gps -> 7. Поиск мест -> ' .. all.poisk[i])
                            end
                        end
                    end
                imgui.EndChild()
                wait(700)
            end)
            if imgui.Button(u8'Вернуться', imgui.ImVec2(160.5, 30)) then
                gps_help.v = not gps_help.v
                report.v = not report.v
                imgui.Process = report.v
                dialog_status = false
                enableDialog(false)
            end
            imgui.SameLine()
            if imgui.Button(u8'Закрыть', imgui.ImVec2(160.5, 30)) then
                gps_help.v = not gps_help.v
            end
        imgui.End()
    end 

    if reglament.v then
        local X, Y = getScreenResolution()
        imgui.SetNextWindowSize(imgui.ImVec2(600, 370), imgui.Cond.FirstUseEver)
        imgui.SetNextWindowPos(imgui.ImVec2(X / 1.3, Y / 1.6), imgui.Cond.FirstUseEver, imgui.ImVec2(0.5, 0.5))
        imgui.Begin(u8'MHelper | Reglament.', reglament, imgui.WindowFlags.NoCollapse + imgui.WindowFlags.NoResize + imgui.WindowFlags.NoScrollbar)
            bluetheme()
            imgui.BeginChild('##bozhhjkghjhg', imgui.ImVec2(588, 338), true)
                imgui.PushFont(font_test)
                    imgui.CenterText(u8'Кик выдаётся за:')
                imgui.PopFont()
                imgui.Text(u8(regl_kick))
                imgui.Separator()
                imgui.PushFont(font_test)
                    imgui.CenterText(u8'Мут выдаётся за:')
                imgui.PopFont()
                imgui.Text(u8(regl_mute))
                imgui.Separator()
                imgui.PushFont(font_test)
                    imgui.CenterText(u8'Призон выдаётся за:')
                imgui.PopFont()
                imgui.Text(u8(regl_jail))
                imgui.Separator()
                imgui.PushFont(font_test)
                    imgui.CenterText(u8'Варн выдаётся за:')
                imgui.PopFont()
                imgui.Text(u8(regl_warn))
                imgui.Separator()
                imgui.PushFont(font_test)
                    imgui.CenterText(u8'Бан выдаётся за:')
                imgui.PopFont()
                imgui.Text(u8(regl_ban))
            imgui.EndChild()
        imgui.End()
    end
end

-----<< КАСТОМНОЕ ОКНО РЕПОРТОВ >>-----       +++ ГОТОВО +++
function report_imgui()
    bluetheme()
    if sampGetPlayerIdByNickname(nick_report) then
        imgui.CenterText(u8"Жалоба/вопрос от " .. nick_report .. ' [' .. sampGetPlayerIdByNickname(nick_report) .. ']:')
    else
        imgui.CenterText(u8"Жалоба/вопрос от " .. nick_report .. ' [OFF]:')
    end
    if imgui.Button(u8(question_report), imgui.ImVec2(438, 25)) then
        dialog_status = not dialog_status
        enableDialog(dialog_status)
    end
    if not dialog_status then
        enableDialog(dialog_status)
    end
    imgui.Separator()
    imgui.CenterText(u8'Введите Ваш ответ сюда:')
    imgui.PushItemWidth(365)
        imgui.InputText(u8'##response', answer)
    imgui.PopItemWidth()
    imgui.SameLine()
    imgui.SetCursorPosX(373.5)
    if imgui.Button(u8'Ответить', imgui.ImVec2(70, 0)) then
        lua_thread.create(function()
            dialog_status = true
            enableDialog(true)
            sampSendDialogResponse(id_dialog_report, 1, -1, tostring(u8:decode(answer.v)))
            wait(700)
            report.v = not report.v
            dialog_status = false
        end)
    end
    if report_id ~= '' then
        imgui.Text(u8'Возможный ID - ') 
        imgui.SameLine()
        if imgui.Button(report_id, imgui.ImVec2(35, 0)) then  
            lua_thread.create(function()
                dialog_status = true
                enableDialog(true)
                sampSendDialogResponse(id_dialog_report, 1, -1, 'Приветствую, ' .. nick_report .. '! Слежу за возможным нарушителем.')
                wait(700)
                sampCloseCurrentDialogWithButton(0)
                report.v = not report.v
                sampSendChat('/sp ' .. report_id)
                dialog_status = false
            end)
        end
    end
    imgui.Separator()
    if imgui.Button(u8"Переслать в админский чат", imgui.ImVec2(217, 25)) then
        lua_thread.create(function()
            dialog_status = true
            enableDialog(true)
            sampSendDialogResponse(id_dialog_report, 1, -1, nil)
            wait(700)
            sampCloseCurrentDialogWithButton(0)
            report.v = not report.v
            if sampGetPlayerIdByNickname(nick_report) then
                sampSendChat('/a [REPORT]: ' .. nick_report .. ' [' .. sampGetPlayerIdByNickname(nick_report) .. ']: ' .. question_report)
            else
                sampSendChat('/a [REPORT]: ' .. nick_report .. ' [OFF]: ' .. question_report)
            end
            dialog_status = false
        end)
    end
    imgui.SameLine()
    if imgui.Button(u8"Передать администратору в /a", imgui.ImVec2(217, 25)) then
        lua_thread.create(function()
            dialog_status = true
            enableDialog(true)
            sampSendDialogResponse(id_dialog_report, 1, -1, 'Приветствую, ' .. nick_report .. '. Передам.')
            wait(700)
            sampCloseCurrentDialogWithButton(0)
            report.v = not report.v
            if sampGetPlayerIdByNickname(nick_report) then
                sampSendChat('/a [REPORT]: ' .. nick_report .. ' [' .. sampGetPlayerIdByNickname(nick_report) .. ']: ' .. question_report)
            else
                sampSendChat('/a [REPORT]: ' .. nick_report .. ' [OFF]: ' .. question_report)
            end
            dialog_status = false
        end)
    end
    if imgui.Button(u8"Слежу за вами", imgui.ImVec2(143, 25)) then
        lua_thread.create(function()
            dialog_status = true
            enableDialog(true)
            sampSendDialogResponse(id_dialog_report, 1, -1, 'Приветствую, ' .. nick_report .. '! Бегу к Вам на помощь!')
            wait(700)
            sampCloseCurrentDialogWithButton(0)
            report.v = not report.v
            if sampGetPlayerIdByNickname(nick_report) then
                sampSendChat('/sp ' .. sampGetPlayerIdByNickname(nick_report))
            end
            dialog_status = false
        end)
    end
    imgui.SameLine()
    if imgui.Button(u8"Жалобу на форум", imgui.ImVec2(144, 25)) then
        lua_thread.create(function()
            dialog_status = true
            enableDialog(true)
            sampSendDialogResponse(id_dialog_report, 1, -1, 'Здравствуйте, если Вы не согласны с наказанием, то оставьте жалобу на форуме.')
            wait(700)
            sampCloseCurrentDialogWithButton(0)
            report.v = not report.v
            dialog_status = false
        end)
    end
    imgui.SameLine()
    if imgui.Button(u8"Помощь по GPS", imgui.ImVec2(143, 25)) then
        report.v = not report.v
        gps_help.v = not gps_help.v
        imgui.Process = gps_help.v
    end
end


-----<< ВКЛАДКА "ПРИВЕТСТВИЕ" В ОСНОВНОМ МЕНЮ >>-----
function imgui_privetstvie()
    local _, my_id = sampGetPlayerIdByCharHandle(PLAYER_PED)
    local my_nick = sampGetPlayerNickname(my_id)
    imgui.PushFont(fontsize)
        imgui.CenterText(u8'Martelli Helper.')
    imgui.PopFont()

    imgui.PushFont(font_medium)
        imgui.SetCursorPosX(22)
        imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'MHelper')
        imgui.SameLine()
        imgui.SetCursorPosX(86)
        imgui.Text(u8'- программа, созданная специально для администрации SanTrope RP.')
        imgui.CenterText(u8'Первый автор - Dexter Martelli, который сделал основную часть скрипта;')
        imgui.CenterText(u8'Второй автор - Vadim Drobyshev, который довёл скрипт до ума.')
        imgui.Text(u8' ')
        imgui.CenterText(u8'- Суть программы - максимально облегчить работу администрации проекта.')
        imgui.Text(u8' ')
        imgui.CenterText(u8'- Если вы нашли баг в скрипте или хотите предложить своё улучшение, то')
        imgui.CenterText(u8'воспользуйтесь соответствующими отправителями во вкладке "Информация".')
        imgui.Text(u8' ')
        imgui.Text(u8' ')
        imgui.CenterText(u8'Спасибо, что выбрали именно нас! :)')
        --[[imgui.TextColored(imgui.ImVec4(1, 0, 0, 1), 'MHelper')
        imgui.SameLine()
        imgui.Text(u8' - абобусный проект, сделанный с душой и ненавистью к семье Supreme.')]]
    imgui.PopFont()
    imgui.PushFont(fontsize_small)
        imgui.SetCursorPosX(480)
        imgui.SetCursorPosY(331)
        imgui.TextDisabled(u8'© Martelli Corporation, 2021-2022')
        if imgui.IsItemClicked(0) then
            sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Ты нашёл первую пасхалку, поздравляю!', 0x7948EB)
        end
    imgui.PopFont()
end

-----<< ВКЛАДКА "НАСТЙРОКИ" В ОСНОВНОМ МЕНЮ >>-----
function imgui_settings()
    local _, my_id = sampGetPlayerIdByCharHandle(PLAYER_PED)
    local my_nick = sampGetPlayerNickname(my_id)
    imgui.BeginChild('##obshie_nastroiki', imgui.ImVec2(311, 334), true)
        imgui.PushFont(zagolovok)
            imgui.CenterText(u8'Общие настройки')
        imgui.PopFont()
        imgui.Separator()
        imgui.Text(u8'- Ваш ник: ' .. my_nick .. ' [' .. my_id ..']')
        imgui.SetCursorPosY(54)
        imgui.Text(u8'- Ваш уровень администратора:')
        imgui.SameLine()
        imgui.SetCursorPosY(52)
        imgui.PushItemWidth(18)
            imgui.InputInt('##lvl adm', admin_lvl, 0, 0)
        imgui.PopItemWidth()
        if admin_lvl.v <= 1 then
            admin_lvl.v = 1
        end
        if admin_lvl.v > 8 then
            admin_lvl.v = 8
        end
        main_config.amenu_config.admin_lvl = tostring(admin_lvl.v)
        inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
        imgui.SetCursorPos(imgui.ImVec2(220, 52))
        if imgui.Button('+', imgui.ImVec2(20, 0)) then
            admin_lvl.v = admin_lvl.v + 1
            main_config.amenu_config.admin_lvl = admin_lvl.v
            inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
        end
        imgui.SetCursorPos(imgui.ImVec2(242, 52))
        if imgui.Button('-', imgui.ImVec2(20, 0)) then
            admin_lvl.v = admin_lvl.v - 1
            main_config.amenu_config.admin_lvl = admin_lvl.v
            inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
        end
        imgui.SetCursorPosY(78)
        imgui.Text(u8'- Скин при входе в игру:')
        imgui.SameLine()
        imgui.SetCursorPosY(76)
        imgui.PushItemWidth(31)
            imgui.InputInt('##skin auth', auth_skin, 0, 0)
        imgui.PopItemWidth()
        imgui.Hint(u8'- Если вы не хотите получать скин при авторизации,\nто поставьте значение 0.', 0)
        imgui.SetCursorPos(imgui.ImVec2(190, 76))
        if imgui.Button('+##2', imgui.ImVec2(20, 0)) then
            if admin_lvl.v < 3 then
                auth_skin.v = 0
                sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Вам недоступна возможность выдавать скины, так как Ваш уровень администратора меньше {8A2BE2}3.', 0x7948EB)
            else
                auth_skin.v = auth_skin.v + 1
                main_config.amenu_config.auth_skin = auth_skin.v
                inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
            end
        end
        imgui.SetCursorPos(imgui.ImVec2(212, 76))
        if imgui.Button('-##2', imgui.ImVec2(20, 0)) then
            if admin_lvl.v < 3 then
                auth_skin.v = 0
                sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Вам недоступна возможность выдавать скины, так как Ваш уровень администратора меньше {8A2BE2}3.', 0x7948EB)
            else
                auth_skin.v = auth_skin.v - 1
                main_config.amenu_config.auth_skin = auth_skin.v
                inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
            end
        end
        imgui.SetCursorPosY(102)
        imgui.Text(u8'- Интерьер при входе в игру:')
        imgui.SameLine()
        imgui.SetCursorPosY(100)
        imgui.PushItemWidth(31)
            imgui.InputInt('##inter auth', auth_inter, 0, 0)
        imgui.PopItemWidth()
        imgui.Hint(u8'- Если вы не хотите появляться в интерьере,\nто поставьте значение 0.', 0)
        imgui.SetCursorPos(imgui.ImVec2(218, 100))
        if imgui.Button('+##3', imgui.ImVec2(20, 0)) then
            if admin_lvl.v < 4 then
                auth_inter.v = 0
                sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Вам недоступна возможность появляться в интерьере, так как Ваш уровень администратора меньше {8A2BE2}4.', 0x7948EB)
            else
                auth_inter.v = auth_inter.v + 1
                main_config.amenu_config.auth_inter = auth_inter.v
                inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
            end
        end
        imgui.SetCursorPos(imgui.ImVec2(240, 100))
        if imgui.Button('-##3', imgui.ImVec2(20, 0)) then
            if admin_lvl.v < 4 then
                auth_inter.v = 0
                sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Вам недоступна возможность появляться в интерьере, так как Ваш уровень администратора меньше {8A2BE2}4.', 0x7948EB)
            else
                auth_inter.v = auth_inter.v - 1
                main_config.amenu_config.auth_inter = auth_inter.v
                inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
            end
        end
        imgui.SetCursorPosY(126)
        imgui.Text(u8'- Лидер при входе в игру:')
        imgui.SameLine()
        imgui.SetCursorPosY(124)
        imgui.PushItemWidth(31)
            imgui.InputInt('##ld auth', auth_ld, 0, 0)
        imgui.PopItemWidth()
        imgui.SameLine()
        imgui.Hint(u8'- Если вы не хотите быть лидером при входе,\nто поставьте значение 0.', 0)
        imgui.SetCursorPos(imgui.ImVec2(199, 124))
        if imgui.Button('+##4', imgui.ImVec2(20, 0)) then
            if admin_lvl.v < 4 then
                auth_ld.v = 0
                sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Вам недоступна возможность выдавать себе лидерку, так как Ваш уровень администратора меньше {8A2BE2}4.', 0x7948EB)
            else
                auth_ld.v = auth_ld.v + 1
                main_config.amenu_config.auth_ld = auth_ld.v
                inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
            end
        end
        imgui.SetCursorPos(imgui.ImVec2(221, 124))
        if imgui.Button('-##4', imgui.ImVec2(20, 0)) then
            if admin_lvl.v < 4 then
                auth_ld.v = 0
                sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Вам недоступна возможность выдавать себе лидерку, так как Ваш уровень администратора меньше {8A2BE2}4.', 0x7948EB)
            else
                auth_ld.v = auth_ld.v - 1
                main_config.amenu_config.auth_ld = auth_ld.v
                inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
            end
        end
        imgui.SetCursorPosY(150)
        imgui.Text(u8'- Лидер семьи при входе в игру:')
        imgui.SameLine()
        imgui.SetCursorPosY(148)
        imgui.PushItemWidth(31)
            imgui.InputInt('##famld auth', auth_famld, 0, 0)
        imgui.PopItemWidth()
        imgui.SameLine()
        imgui.Hint(u8'- Если вы не хотите быть лидером семьи при входе,\nто поставьте значение 0.', 0)
        imgui.SetCursorPos(imgui.ImVec2(238, 148))
        if imgui.Button('+##5', imgui.ImVec2(20, 0)) then
            if admin_lvl.v < 4 then
                auth_famld.v = 0
                sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Вам недоступна возможность выдавать себе лидерку семьи, так как Ваш уровень администратора меньше {8A2BE2}4.', 0x7948EB)
            else
                auth_famld.v = auth_famld.v + 1
                main_config.amenu_config.auth_famld = auth_famld.v
                inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
            end
        end
        imgui.SetCursorPos(imgui.ImVec2(260, 148))
        if imgui.Button('-##5', imgui.ImVec2(20, 0)) then
            if admin_lvl.v < 4 then
                auth_famld.v = 0
                sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Вам недоступна возможность выдавать себе лидерку семьи, так как Ваш уровень администратора меньше {8A2BE2}4.', 0x7948EB)
            else
                auth_famld.v = auth_famld.v - 1
                main_config.amenu_config.auth_famld = auth_famld.v
                inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
            end
        end        
        imgui.CenterText(u8'Ваш префикс для отправки форм:')
        imgui.PushItemWidth(181)
            if imgui.InputText('##prefix_adm', prefix_adm) then
                main_config.amenu_config.prefix_adm = tostring(prefix_adm.v)
                inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
            end
            imgui.Hint(u8'- Вид в чате: ИЗП ' .. main_config.amenu_config.prefix_adm, 0)
        imgui.PopItemWidth()
        imgui.SameLine()
        if imgui.Button(u8'Вывести в чат', imgui.ImVec2(105, 0)) then
            sampSetChatInputEnabled(true)
            sampSetChatInputText(sampGetChatInputText() .. ' ' .. main_config.amenu_config.prefix_adm)
        end



        imgui.Separator()
        if imgui.Checkbox("##autologin", auto_auth) then
            main_config.amenu_config.autologin_acc = auto_auth.v
            inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
        end
        imgui.SameLine()
        imgui.SetCursorPosY(216)
        imgui.Text(u8'[Вкл/Выкл] Авто-логин в аккаунт')
        if main_config.amenu_config.autologin_acc == true then
            imgui.CenterText(u8'Введите пароль от аккаунта:')
            imgui.PushItemWidth(273)
                if imgui.InputText('##pass akk', password_acc, imgui.InputTextFlags.Password) then
                    main_config.amenu_config.password_acc = tostring(password_acc.v)
                    inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
                end
            imgui.PopItemWidth()
            imgui.SameLine()
            imgui.TextDisabled('(?)')
            if main_config.amenu_config.password_acc == '' then
                imgui.Hint(u8'- Вы ещё не ввели пароль от аккаунта в систему скрипта. ', 0)
            else
                imgui.Hint(u8'- Ваш текущий пароль от аккаунта - ' .. main_config.amenu_config.password_acc .. '.', 0)
            end
            imgui.Separator()
        end
        if imgui.Checkbox("##autologinadm", auto_auth_adm) then
            main_config.amenu_config.autologin_adm = auto_auth_adm.v
            inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
        end
        imgui.SameLine()
        imgui.Text(u8'[Вкл/Выкл] Авто-логин в админку')
        if main_config.amenu_config.autologin_adm == true then
            imgui.CenterText(u8'Введите пароль от админ. панели:')
            imgui.PushItemWidth(273)
                if imgui.InputText('##pass adm', password_adm, imgui.InputTextFlags.Password) then
                    main_config.amenu_config.password_adm = tostring(password_adm.v)
                    inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
                end
            imgui.PopItemWidth()
            imgui.SameLine()
            imgui.TextDisabled('(?)')
            if main_config.amenu_config.password_adm == '' then
                imgui.Hint(u8'- Вы ещё не ввели пароль от админ. панели в систему скрипта. ', 0)
            else
                imgui.Hint(u8'- Ваш текущий пароль от админ. панели - ' .. main_config.amenu_config.password_adm .. '.', 0)
            end
        end
        if main_config.amenu_config.car_info == true then
            imgui.Separator()
            imgui.CenterText(u8"Настройте дальность прорисовки информации:")
            imgui.PushItemWidth(291)
                if imgui.SliderInt("##longInfoCar", intInfoCars, 30, 100) then
                    main_config.amenu_config.intInfoCars = intInfoCars.v
                    inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
                end
            imgui.PopItemWidth()
        end





    imgui.EndChild()

    imgui.SameLine()

    imgui.BeginChild('##nastroiki_chitov', imgui.ImVec2(311, 334), true)
        imgui.PushFont(zagolovok)
            imgui.CenterText(u8'Настройки читов и фишек')
        imgui.PopFont()
        imgui.Separator()
        if imgui.Checkbox("##clickwarp", clickwarp) then
            main_config.amenu_config.clickwarp = clickwarp.v
            inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
        end
        imgui.SetCursorPos(imgui.ImVec2(31, 35.5))
        imgui.Text(u8'[Вкл/выкл] Click Warp')
        imgui.SameLine()
        imgui.TextDisabled('(?)')
        imgui.Hint(u8'- При нажатии на колёсико мыши вы можете телепортироваться на небольшие дистанции.\n- При помощи колёсика мыши и ПКМ вы можете сесть в машину.', 0)
        imgui.SetCursorPosY(57)
        if imgui.Checkbox("##emenu", emenu) then
            main_config.amenu_config.emenu = emenu.v
            inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
        end
        imgui.SetCursorPos(imgui.ImVec2(31, 58.5))
        imgui.Text(u8'[Вкл/выкл] E-Menu')
        imgui.SameLine()
        imgui.TextDisabled('(?)')
        imgui.Hint(u8'- Меню, которое появляется при наведении мыши на игрока\nи нажатии на клавишу E (англ).', 0)
        imgui.SetCursorPosY(80)
        if imgui.Checkbox("##babl kvas chat", bubble_chat_imgui) then
            main_config.amenu_config.bubble_chat = bubble_chat_imgui.v
            inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
        end
        imgui.SetCursorPos(imgui.ImVec2(31, 81.5))
        imgui.Text(u8'[Вкл/выкл] Дальний чат')
        imgui.SameLine()
        imgui.TextDisabled('(?)')
        imgui.Hint(u8'- Показывает сообщения, которые пишут игроки, но на более дальнем расстоянии.\n-Если зажать клавишу B (и), то колёсико позволит крутить его.', 0)
        imgui.SetCursorPosY(103)
        if imgui.Checkbox("##speed", speed_hack) then
            main_config.amenu_config.speed_hack = speed_hack.v
            inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
        end
        imgui.SetCursorPos(imgui.ImVec2(31, 104.5))
        imgui.Text(u8'[Вкл/выкл] Speed Hack')
        imgui.SameLine()
        imgui.TextDisabled('(?)')
        imgui.Hint(u8'- Ускоряет ваш транспорт при нажатии на левый ALT.', 0)
        imgui.SetCursorPosY(126)
        if imgui.Checkbox("##wallhack", wall_hack) then
            main_config.amenu_config.wall_hack = wall_hack.v
            inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
        end
        imgui.SetCursorPos(imgui.ImVec2(31, 127.5))
        imgui.Text(u8'[Вкл/выкл] Wall Hack')
        imgui.SameLine()
        imgui.TextDisabled('(?)')
        imgui.Hint(u8'- Позволяет видеть ники игроков на более дальних расстояниях.', 0)
        imgui.SetCursorPosY(149)
        if imgui.Checkbox("##GM", god_mode) then
            main_config.amenu_config.god_mode = god_mode.v
            inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
        end
        imgui.SetCursorPos(imgui.ImVec2(31, 150.5))
        imgui.Text(u8'[Вкл/выкл] God Mode')
        imgui.SameLine()
        imgui.TextDisabled('(?)')
        imgui.Hint(u8'- Делает Вас неубиваемым.', 0)
        imgui.SetCursorPosY(172)
        if imgui.Checkbox("##GMCar", god_mode_car) then
            main_config.amenu_config.god_mode_car = god_mode_car.v
            inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
        end
        imgui.SetCursorPos(imgui.ImVec2(31, 173.5))
        imgui.Text(u8'[Вкл/выкл] God Mode Car')
        imgui.SameLine()
        imgui.TextDisabled('(?)')
        imgui.Hint(u8'- Делает ваш транспорт неубиваемым.\n- НЕ использовать, если вы НЕ находитесь в транспорте.\n- Перед выходом из транспорта ОТКЛЮЧИТЬ.', 0)
        imgui.SetCursorPosY(195)
        if imgui.Checkbox("##airbrake", air_brake) then
            main_config.amenu_config.air_brake = air_brake.v
            inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
        end
        imgui.SetCursorPos(imgui.ImVec2(31, 196.5))
        imgui.Text(u8'[Вкл/выкл] Air Brake')
        imgui.SameLine()
        imgui.TextDisabled('(?)')
        imgui.Hint(u8"- Быстрое перемещение вашего персонажа.\n- Активируется при нажатии на правый SHIFT.\n- Скорость регулируется при помощи клавиш + -.", 0)
        imgui.SetCursorPosY(218)
        if imgui.Checkbox("##infammo", inf_ammo) then
            main_config.amenu_config.inf_ammo = inf_ammo.v
            inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
        end
        imgui.SetCursorPos(imgui.ImVec2(31, 219.5))
        imgui.Text(u8'[Вкл/выкл] Infinity Ammo')
        imgui.SameLine()
        imgui.TextDisabled('(?)')
        imgui.Hint(u8"- Делает ваши патроны бесконечными.", 0)
        imgui.SetCursorPosY(241)
        if imgui.Checkbox("##nobike", no_bike) then
            main_config.amenu_config.no_bike = no_bike.v
            inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
        end
        imgui.SetCursorPos(imgui.ImVec2(31, 242.5))
        imgui.Text(u8'[Вкл/выкл] No Bike')
        imgui.SameLine()
        imgui.TextDisabled('(?)')
        imgui.Hint(u8"- Не даст вашему персонажу упасть с мотоцикла/велосипеда.", 0)
        imgui.SetCursorPosY(264)
        if imgui.Checkbox("##antiejectcar", anti_eject_car) then
            main_config.amenu_config.anti_eject_car = anti_eject_car.v
            inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
        end
        imgui.SetCursorPos(imgui.ImVec2(31, 265.5))
        imgui.Text(u8'[Вкл/выкл] Anti Eject Car')
        imgui.SameLine()
        imgui.TextDisabled('(?)')
        imgui.Hint(u8"- Не позволит какому-либо игроку выкинуть вас из транспортного средства.", 0)
        imgui.SetCursorPosY(287)
        if imgui.Checkbox("##carinfo", car_info) then
            main_config.amenu_config.car_info = car_info.v
            inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
        end
        imgui.SetCursorPos(imgui.ImVec2(31, 288.5))
        imgui.Text(u8'[Вкл/выкл] Информация о транспорте')
        imgui.SameLine()
        imgui.TextDisabled('(?)')
        imgui.Hint(u8"- Показывает количество HP и ID транспортного средства.", 0)

        imgui.SetCursorPosY(310)
        if imgui.Checkbox("##schetchik repov", count_rep) then
            main_config.amenu_config.count_rep = count_rep.v
            inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
        end
        imgui.SetCursorPos(imgui.ImVec2(31, 311.5))
        imgui.Text(u8'[Вкл/выкл] Счётчик репортов')
        imgui.SameLine()
        imgui.TextDisabled('(?)')
        imgui.Hint(u8'- Считает репорты, на которые Вы ответили.', 0)

        imgui.SetCursorPosY(333)
        if imgui.Checkbox("##fast nakaz", fast_nakaz) then
            main_config.amenu_config.fast_nakaz = fast_nakaz.v
            inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
        end
        imgui.SetCursorPos(imgui.ImVec2(31, 334.5))
        imgui.Text(u8'[Вкл/выкл] Быстрые наказания')
        imgui.SameLine()
        imgui.TextDisabled('(?)')
        imgui.Hint(u8'- Упрощённый ввод команд для выдачи наказаний.\n- Для более подробной информации используйте /fastnakaz.', 0)

        imgui.SetCursorPosY(356)
        if imgui.Checkbox("##togphone", togphone) then
            main_config.amenu_config.togphone = togphone.v
            inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
        end
        imgui.SetCursorPos(imgui.ImVec2(31, 357.5))
        imgui.Text(u8'[Вкл/выкл] Отключать телефон при входе')
        imgui.SameLine()
        imgui.TextDisabled('(?)')
        imgui.Hint(u8'- При входе в игру сразу будет отключаться телефон.\nНЕ РАБОТАЕТ!', 0)

        imgui.SetCursorPosY(379)
        if imgui.Checkbox("##custom report", custom_report_imgui) then
            main_config.amenu_config.custom_report_imgui = custom_report_imgui.v
            inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')
        end
        imgui.SetCursorPos(imgui.ImVec2(31, 380.5))
        imgui.Text(u8'[Вкл/выкл] Custom Report')
        imgui.SameLine()
        imgui.TextDisabled('(?)')
        imgui.Hint(u8'- Нестандартный вид окна репортов, более функциональный.', 0)
    imgui.EndChild()
end


-----<< ВКЛАДКА "КОМАНДЫ" В ОСНОВНОМ МЕНЮ >>-----
function imgui_commands()
    local _, my_id = sampGetPlayerIdByCharHandle(PLAYER_PED)
    local my_nick = sampGetPlayerNickname(my_id)
    imgui.PushFont(fontsize)
        imgui.CenterText(u8'Функционал и команды скрипта')
    imgui.PopFont()
    imgui.PushFont(font_medium)
    
        imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/amenu')
        imgui.SameLine()
        imgui.Text(u8'- открыть/закрыть главное меню.')

        imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/az')
        imgui.SameLine()
        imgui.Text(u8'- открыть/закрыть меню телепортов.')

        imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/regl')
        imgui.SameLine()
        imgui.Text(u8'- открыть/закрыть регламент наказаний.')

        imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/fastnakaz')
        imgui.SameLine()
        imgui.Text(u8'- показать/скрыть команды быстрых наказаний.')

        imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/login')
        imgui.SameLine()
        imgui.Text(u8'- авторизоваться в систему скрипта.')

        imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/unlogin')
        imgui.SameLine()
        imgui.Text(u8'- выйти из системы скрипта.')

        imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/checkip IP-1 IP-2')
        imgui.SameLine()
        imgui.Text(u8'- узнать информацию об IP.')

        imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/mypos')
        imgui.SameLine()
        imgui.Text(u8'- вывести в чат местоположение персонажа.')

        imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'Клавиша O (щ)')
        imgui.SameLine()
        imgui.Text(u8'- принять доступную мне форму.')

    imgui.PopFont()
end

-----<< ВКЛАДКА "ДОНАТ" В ОСНОВНОМ МЕНЮ >>-----
function imgui_donate()
    local _, my_id = sampGetPlayerIdByCharHandle(PLAYER_PED)
    local my_nick = sampGetPlayerNickname(my_id)
    imgui.BeginChild('##donate_frame', imgui.ImVec2(245, 385), false)
        imgui.PushFont(fontsize)
            imgui.Text(u8'Donate Frame')
        imgui.PopFont()
    imgui.EndChild()
end

-----<< ВКЛАДКА "ОБРАТНАЯ СВЯЗЬ" В ОСНОВНОМ МЕНЮ >>-----
function imgui_about()
    imgui.BeginChild('##logizmeneniy', imgui.ImVec2(352, 234), true)
        imgui.PushFont(zagolovok)
            imgui.CenterText(u8'Лог изменений')
        imgui.PopFont()
        imgui.Separator()
        if imgui.CollapsingHeader(u8'Изменения в версии 2.0') then
            imgui.Text(u8'- Потом напишу')
            imgui.Separator()
        end
        if imgui.CollapsingHeader(u8'Изменения в версии 1.5') then
            imgui.Text(u8'- Данные отсутствуют.')
        end
    imgui.EndChild()
    imgui.SameLine()
    imgui.BeginChild('##avtori', imgui.ImVec2(270, 234), true)
        imgui.PushFont(zagolovok)
            imgui.CenterText(u8'Авторы скрипта')
        imgui.PopFont()
        imgui.Separator()
        --[[imgui.Image(image_vk_icon, imgui.ImVec2(48, 48))
        if imgui.IsItemClicked(0) then 
            os.execute('start https://vk.com/martelli.corp')
        end
        imgui.SameLine()
        imgui.Text(u8' — ссылка на группу ВК разработчика')
        imgui.Image(image_tg_ic, imgui.ImVec2(62, 52))
        if imgui.IsItemClicked(0) then 
            os.execute('start https://t.me/martelli_corp')
        end
        imgui.SameLine()
        imgui.Text(u8' — ссылка на Telegram-канал разработчика')]]
        imgui.PushFont(font_test)
            imgui.Text(u8'- Martelli Corporation:')
        imgui.PopFont()
        imgui.Text(u8'ВКонтакте  - ')
        imgui.SameLine()
        imgui.Text(u8'vk.com/martelli.corp.')
        if imgui.IsItemClicked(1) then
            os.execute('start https://vk.com/martelli.corp')
        end
        imgui.Hint(u8'- Кликабельная ссылка (Нажмите ПКМ).', 0)
        imgui.Text(u8'Телеграмм  - ')
        imgui.SameLine()
        imgui.Text(u8't.me/martelli_corp.')
        if imgui.IsItemClicked(1) then
            os.execute('start https://t.me/martelli_corp')
        end
        imgui.Hint(u8'- Кликабельная ссылка (Нажмите ПКМ).', 0)
        imgui.Text(u8' ')
        imgui.PushFont(font_test)
            imgui.Text(u8'- Vadim Drobyshev:')
        imgui.PopFont()
        imgui.Hint(u8'- По всем вопросам обращаться только к нему!!!.', 0)
        imgui.Text(u8'ВКонтакте  - ')
        imgui.SameLine()
        imgui.Text(u8'vk.com/vdmdbrshv.')
        if imgui.IsItemClicked(1) then
            os.execute('start https://vk.com/vdmdbrshv')
        end
        imgui.Hint(u8'- Кликабельная ссылка (Нажмите ПКМ).', 0)
        imgui.Text(u8' ')
        imgui.PushFont(font_test)
            imgui.Text(u8'- Blast Hack (помощь с кодом):')
        imgui.PopFont()
        imgui.Text(u8'Сайт  - ')
        imgui.SameLine()
        imgui.Text(u8'https://www.blast.hk.')
        if imgui.IsItemClicked(1) then
            os.execute('start https://www.blast.hk')
        end
        imgui.Hint(u8'- Кликабельная ссылка (Нажмите ПКМ).', 0)
    imgui.EndChild()
    imgui.BeginChild('##bagi', imgui.ImVec2(626, 96), true)
        imgui.CenterText(u8'Если Вы найдёте какой-либо баг/недоработку, отправьте информацию о нём разработчику:')
        imgui.Hint(u8'- Не рекомендую использовать это просто так.', 0)
        imgui.PushItemWidth(435)
            imgui.InputText('##send_bug', bug)
        imgui.PopItemWidth()
        imgui.SameLine()		
        if imgui.DegradeButton(u8'Отправить недоработку', imgui.ImVec2(174, 0)) then
            VKMessage(365382457, 215537409, tostring(bug.v), "4d282125e4445e7ce6b66df452a94ebc2226a77cd1dcb525480204a039cf4960284b949c94cd1cb3002d0")
        end
        imgui.Separator()
        imgui.CenterText(u8'Если же у Вас имеется какая-либо идея для скрипта, отправьте информацию о ней разработчику:')
        imgui.Hint(u8'- Не рекомендую использовать это просто так.', 0)
        imgui.PushItemWidth(435)
            imgui.InputText('##send_novovvedenie', novovvedenie)
        imgui.PopItemWidth()
        imgui.SameLine()		
        if imgui.DegradeButton(u8'Отправить свою идею', imgui.ImVec2(174, 0)) then
            VKMessage_novved(365382457, 215537409, tostring(novovvedenie.v), "4d282125e4445e7ce6b66df452a94ebc2226a77cd1dcb525480204a039cf4960284b949c94cd1cb3002d0")
        end
    imgui.EndChild()
end

-----<< НАСТРОЙКА GM >>-----
function doKeyCheck()
	if not isKeyCheckAvailable() then return end
	local isInVeh = isCharInAnyCar(playerPed)
	local veh = nil
	if isInVeh then veh = storeCarCharIsInNoSave(playerPed) end
	
	if main_config.amenu_config.god_mode == true then
		if gmped == false then
			setCharProofs(playerPed, true, true, true, true, true)
			writeMemory(0x96916E, 1, 1, false)
			gmped = true
            sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Режим бессмертия активирован.', 0x7948EB)
        end
    else
        if gmped ~= false then
			setCharProofs(playerPed, false, false, false, false, false)
			writeMemory(0x96916E, 1, 0, false)
			gmped = false
            sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Режим бессмертия деактивирован.', 0x7948EB)
		end
	end
    if main_config.amenu_config.god_mode_car == true and isInVeh then
        if gmcar == false then
            setCarProofs(veh, true, true, true, true, true)
            gmcar = true
            sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Режим бессмертия транспорта активирован.', 0x7948EB)
        end
    else
        if gmcar ~= false then
            setCarProofs(veh, false, false, false, false, false)
            gmcar = false
            sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Режим бессмертия транспорта деактивирован.', 0x7948EB)
        end
    end
	
	doCheatWork()
end

function doCheatWork()
	local isInVeh = isCharInAnyCar(playerPed)
	local veh = nil
	if isInVeh then veh = storeCarCharIsInNoSave(playerPed) end
		
	if gmped == true and isCharDead(playerPed) then
		setCharProofs(playerPed, false, false, false, false, false)
		writeMemory(0x96916E, 1, 0, false)	
		gmped = false
        sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Режим бессмертия деактивирован.', 0x7948EB)
	end
	
	if gmcar == true and isInVeh then
		setCarProofs(veh, true, true, true, true, true)
	end
end

function isKeyCheckAvailable()
	if not isSampfuncsLoaded() then
		return true
	end
	return not isSampfuncsConsoleActive() and not sampIsChatInputActive() and not sampIsDialogActive()
end

-----<< НАСТРОЙКА WH >>-----
function nameTagOn()
	local pStSet = sampGetServerSettingsPtr()
	mem.setfloat(pStSet + 39, 1488.0)
	mem.setint8(pStSet + 47, 0)
	mem.setint8(pStSet + 56, 1)
end

function nameTagOff()
	local pStSet = sampGetServerSettingsPtr()
	mem.setfloat(pStSet + 39, 50.0)
	mem.setint8(pStSet + 47, 0)
	mem.setint8(pStSet + 56, 1)
end


-----<< ДВОЙНАЯ КНОПКА >>-----
function imgui.SelButton(state, lable, size)
    if state then
        --imgui.PushStyleColor(imgui.Col.Text, imgui.ImVec4(1.00, 1.00, 1.00, 1.00))
        imgui.PushStyleColor(imgui.Col.Button, imgui.ImVec4(0.06, 0.53, 0.98, 1.00))
        imgui.PushStyleColor(imgui.Col.ButtonHovered, imgui.ImVec4(0.28, 0.56, 1.00, 1.00))
        imgui.PushStyleColor(imgui.Col.ButtonActive, imgui.ImVec4(0.06, 0.53, 0.98, 1.00))
            local button = imgui.Button(lable, size)
        imgui.PopStyleColor(3)
        return button
    else
        --imgui.PushStyleColor(imgui.Col.Text, imgui.ImVec4(1.00, 1.00, 1.00, 0.80))
        imgui.PushStyleColor(imgui.Col.Button, imgui.ImVec4(0.26, 0.59, 0.98, 0.40))
        imgui.PushStyleColor(imgui.Col.ButtonHovered, imgui.ImVec4(0.26, 0.59, 0.98, 1.00))
        imgui.PushStyleColor(imgui.Col.ButtonActive, imgui.ImVec4(0.06, 0.53, 0.98, 1.00))
            local button = imgui.Button(lable, size)
            imgui.PopStyleColor(3)
        return button
    end
end

-----<< НЕПОНЯТНАЯ ДИЧЬ >>-----
function debug(text)
    if text then
        sampAddChatMessage('[DEBUG]: ' .. text, -1)
    else
        sampAddChatMessage('Debbuged!', -1)
    end
end

-----<< ТОЖЕ ПОДСКАЗКА, НО НЕКРАСИВАЯ >>-----
function hint(text)
    lua_thread.create(
      function()
        imgui.TextDisabled("(?)")
        if imgui.IsItemHovered() then
          imgui.BeginTooltip()
          imgui.TextUnformatted(u8(text))
          imgui.EndTooltip()
        end
    end)
end

-----<< ПОЛУЧЕНИЕ ID БЛИЖАЙШЕГО ИГРОКА >>-----
function getClosestPlayerId(di)
    local minDist = di
    local closestId = -1
    local x, y, z = getCharCoordinates(PLAYER_PED)
    for i = 0, 999 do
        local streamed, pedID = sampGetCharHandleBySampPlayerId(i)
        if streamed then
            local xi, yi, zi = getCharCoordinates(pedID)
            local dist = math.sqrt( (xi - x) ^ 2 + (yi - y) ^ 2 + (zi - z) ^ 2 )
            if dist < minDist then
			--	sampAddChatMessage(dist, -1)
				--print(minDist)
                minDist = dist
                closestId = i
            end
        end
    end
    return closestId
end

-----<< НЕПОНЯТНАЯ ДИЧЬ >>-----
function getBodyPartCoordinates(id, handle)
    local pedptr = getCharPointer(handle)
    local vec = ffi.new("float[3]")
    getBonePosition(ffi.cast("void*", pedptr), vec, id, true)
    return vec[0], vec[1], vec[2]
end
function teleport(x, y, z)
    if x == nil then
        z = -100
	end

    if x ~= 0 and y ~= 0 then
        setCharCoordinates(PLAYER_PED, x, y, z)
    end
end
function show_entry(label, x, y, z,interior_id)
	if imgui.MenuItem(label, "", false, true) then
	    imgui.PushItemWidth(36)
		setCharInterior(PLAYER_PED,interior_id)
		setInteriorVisible(interior_id)
		clearExtraColours(true)
		requestCollision(x,y)
		loadScene(x,y,z)
		activateInteriorPeds(true)
		teleport(x, y, z)
		imgui.PopItemWidth()
	end
end
function drawClickableText(font, text, posX, posY, color, colorA)
    renderFontDrawText(font, text, posX, posY, color)
    local textLenght = renderGetFontDrawTextLength(font, text)
    local textHeight = renderGetFontDrawHeight(font)
    local curX, curY = getCursorPos()
      if curX >= posX and curX <= posX + textLenght and curY >= posY and curY <= posY + textHeight then
        renderFontDrawText(font, text, posX, posY, colorA)
        if wasKeyPressed(1) then
            return true
        end
    end
end

-----<< ПОЛУЧЕНИЕ ID ПО НИКУ >>-----
function sampGetPlayerIdByNickname(nick)
  nick = tostring(nick)
  local _, myid = sampGetPlayerIdByCharHandle(PLAYER_PED)
  if nick == sampGetPlayerNickname(myid) then return myid end
  for i = 0, 1003 do
    if sampIsPlayerConnected(i) and sampGetPlayerNickname(i) == nick then
      return i
    end
  end
end

-----<< НЕПОНЯТНАЯ ДИЧЬ >>-----
function imgui.CustomButton(name, color, colorHovered, colorActive, size)
    local clr = imgui.Col
    imgui.PushStyleColor(clr.Button, color)
    imgui.PushStyleColor(clr.ButtonHovered, colorHovered)
    imgui.PushStyleColor(clr.ButtonActive, colorActive)
    if not size then size = imgui.ImVec2(0, 0) end
    local result = imgui.Button(name, size)
    imgui.PopStyleColor(3)
    return result
end
function enableDialog(bool)
    local memory = require 'memory'
    memory.setint32(sampGetDialogInfoPtr()+40, bool and 1 or 0, true)
end

-----<< ТЕКСТ ПО ЦЕНТРУ >>-----
function imgui.CenterText(text)
    local width = imgui.GetWindowWidth()
    local calc = imgui.CalcTextSize(text)
    imgui.SetCursorPosX( width / 2 - calc.x / 2 )
    imgui.Text(text)
end


-----<< ПОДСКАЗКИ >>-----
function imgui.Hint(text, delay, action)
    if imgui.IsItemHovered() then
        if go_hint == nil then go_hint = os.clock() + (delay and delay or 0.0) end
        local alpha = (os.clock() - go_hint) * 5
        if os.clock() >= go_hint then
            imgui.PushStyleVar(imgui.StyleVar.WindowPadding, imgui.ImVec2(10, 10))
            imgui.PushStyleVar(imgui.StyleVar.Alpha, (alpha <= 1.0 and alpha or 1.0))
                imgui.PushStyleColor(imgui.Col.PopupBg, imgui.ImVec4(0.11, 0.11, 0.11, 1.00))
                    imgui.BeginTooltip()
                    imgui.PushTextWrapPos(450)
                    imgui.TextColored(imgui.GetStyle().Colors[imgui.Col.ButtonHovered], u8'Подсказка:')
                    imgui.TextUnformatted(text)
                    if action ~= nil then
                        imgui.TextColored(imgui.GetStyle().Colors[imgui.Col.TextDisabled], '\n '..action)
                    end
                    if not imgui.IsItemVisible() and imgui.GetStyle().Alpha == 1.0 then go_hint = nil end
                    imgui.PopTextWrapPos()
                    imgui.EndTooltip()
                imgui.PopStyleColor()
            imgui.PopStyleVar(2)
        end
    end
end

-----<< ЧЕКЕР АЙПИ >>-----
function asyncHttpRequest(method, url, args, resolve, reject)
	local request_thread = effil.thread(function(method, url, args)
		local requests = require"requests"
		local result, response = pcall(requests.request, method, url, args)
		if result then
			response.json, response.xml = nil, nil
			return true, response
		else
			return false, response
		end
	end)(method, url, args)

	if not resolve then
		resolve = function() end
	end
	if not reject then
		reject = function() end
	end
	lua_thread.create(function()
		local runner = request_thread
		while true do
			local status, err = runner:status()
			if not err then
				if status == "completed" then
					local result, response = runner:get()
					if result then
						resolve(response)
					else
						reject(response)
					end
					return
				elseif status == "canceled" then
					return reject(status)
				end
			else
				return reject(err)
			end
			wait(0)
		end
	end)
end

function distance_cord(lat1, lon1, lat2, lon2)
	if lat1 == nil or lon1 == nil or lat2 == nil or lon2 == nil or lat1 == "" or lon1 == "" or lat2 == "" or lon2 == "" then
		return 0
	end
	local dlat = math.rad(lat2 - lat1)
	local dlon = math.rad(lon2 - lon1)
	local sin_dlat = math.sin(dlat / 2)
	local sin_dlon = math.sin(dlon / 2)
	local a =
		sin_dlat * sin_dlat + math.cos(math.rad(lat1)) * math.cos(
			math.rad(lat2)
		) * sin_dlon * sin_dlon
	local c = 2 * math.atan2(math.sqrt(a), math.sqrt(1 - a))
	local d = 6378 * c
	return d
end

function chip(cl)
	if cl ~= '' then
		ips = {}
		for word in string.gmatch(cl, "(%d+%p%d+%p%d+%p%d+)") do
			table.insert(ips, { query = word })
		end
		if #ips > 0 then
			data_json = cjson.encode(ips)
			asyncHttpRequest(
				"POST",
				"http://ip-api.com/batch?fields=25305&lang=ru",
				{ data = data_json },
				function(response)
					rdata = cjson.decode(u8:decode(response.text))
					local text = ""
					for i = 1, #rdata do
						if rdata[i]["status"] == "success" then
							distances =
								distance_cord(
									rdata[1]["lat"],
									rdata[1]["lon"],
									rdata[i]["lat"],
									rdata[i]["lon"]
								)
							text =
								text .. string.format(
									"IP №" .. i .. " - %s:\n- Cтрана - %s.\n- Город - %s.\n- Провайдер - %s.\n- Расстояние - %d.  \n\n\n",
									rdata[i]["query"],
									rdata[i]["country"],
									rdata[i]["city"],
									rdata[i]["isp"],
									distances
								)
				end
					end
					if text == "" then
						text = "\n\n\n\n\n\n\n\tК сожалению, невозможно найти данный IP."
					end
					showdialog("Информация об IP", text)
				end,
				function(err)
                    sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Произошла ошибка - {8A2BE2}' .. err, 0x7948EB)
				end
			)
		end
	else
		sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Введите {8A2BE2}/checkip [IP 1] <IP 2>.', 0x7948EB)
	end
end

function showdialog(name, rdata)
	--[[sampShowDialog(
		math.random(1000),
		"{FF4444}" .. name,
		rdata,
		"Закрыть",
		false,
		0
	)]]
	
	ip_info.v = u8(rdata)
	check_ip.v = not check_ip.v
	imgui.Process = check_ip.v
end

HeaderButton = function(bool, str_id)
    local DL = imgui.GetWindowDrawList()
    local ToU32 = imgui.ColorConvertFloat4ToU32
    local result = false
    local label = string.gsub(str_id, "##.*$", "")
    local duration = { 0.5, 0.3 }
    local cols = {
        idle = imgui.GetStyle().Colors[imgui.Col.TextDisabled],
        hovr = imgui.GetStyle().Colors[imgui.Col.Text],
        slct = imgui.GetStyle().Colors[imgui.Col.ButtonActive]
    }

    if not AI_HEADERBUT then AI_HEADERBUT = {} end
     if not AI_HEADERBUT[str_id] then
        AI_HEADERBUT[str_id] = {
            color = bool and cols.slct or cols.idle,
            clock = os.clock() + duration[1],
            h = {
                state = bool,
                alpha = bool and 1.00 or 0.00,
                clock = os.clock() + duration[2],
            }
        }
    end
    local pool = AI_HEADERBUT[str_id]

    local degrade = function(before, after, start_time, duration)
        local result = before
        local timer = os.clock() - start_time
        if timer >= 0.00 then
            local offs = {
                x = after.x - before.x,
                y = after.y - before.y,
                z = after.z - before.z,
                w = after.w - before.w
            }

            result.x = result.x + ( (offs.x / duration) * timer )
            result.y = result.y + ( (offs.y / duration) * timer )
            result.z = result.z + ( (offs.z / duration) * timer )
            result.w = result.w + ( (offs.w / duration) * timer )
        end
        return result
    end

    local pushFloatTo = function(p1, p2, clock, duration)
        local result = p1
        local timer = os.clock() - clock
        if timer >= 0.00 then
            local offs = p2 - p1
            result = result + ((offs / duration) * timer)
        end
        return result
    end

    local set_alpha = function(color, alpha)
        return imgui.ImVec4(color.x, color.y, color.z, alpha or 1.00)
    end

    imgui.BeginGroup()
        local pos = imgui.GetCursorPos()
        local p = imgui.GetCursorScreenPos()
      
        imgui.TextColored(pool.color, label)
        local s = imgui.GetItemRectSize()
        local hovered = imgui.IsItemHovered()
        local clicked = imgui.IsItemClicked()
      
        if pool.h.state ~= hovered and not bool then
            pool.h.state = hovered
            pool.h.clock = os.clock()
        end
      
        if clicked then
            pool.clock = os.clock()
            result = true
        end

        if os.clock() - pool.clock <= duration[1] then
            pool.color = degrade(
                imgui.ImVec4(pool.color),
                bool and cols.slct or (hovered and cols.hovr or cols.idle),
                pool.clock,
                duration[1]
            )
        else
            pool.color = bool and cols.slct or (hovered and cols.hovr or cols.idle)
        end

        if pool.h.clock ~= nil then
            if os.clock() - pool.h.clock <= duration[2] then
                pool.h.alpha = pushFloatTo(
                    pool.h.alpha,
                    pool.h.state and 1.00 or 0.00,
                    pool.h.clock,
                    duration[2]
                )
            else
                pool.h.alpha = pool.h.state and 1.00 or 0.00
                if not pool.h.state then
                    pool.h.clock = nil
                end
            end

            local max = s.x / 2
            local Y = p.y + s.y + 3
            local mid = p.x + max

            DL:AddLine(imgui.ImVec2(mid, Y), imgui.ImVec2(mid + (max * pool.h.alpha), Y), ToU32(set_alpha(pool.color, pool.h.alpha)), 3)
            DL:AddLine(imgui.ImVec2(mid, Y), imgui.ImVec2(mid - (max * pool.h.alpha), Y), ToU32(set_alpha(pool.color, pool.h.alpha)), 3)
        end

    imgui.EndGroup()
    return result
end

function imgui.DegradeButton(label, size)
    local duration = {
        1.0, -- Длительность переходов между hovered / idle
        0.3  -- Длительность анимации после нажатия
    }

    local cols = {
        default = imgui.ImVec4(imgui.GetStyle().Colors[imgui.Col.Button]),
        hovered = imgui.ImVec4(imgui.GetStyle().Colors[imgui.Col.ButtonHovered]),
        active  = imgui.ImVec4(imgui.GetStyle().Colors[imgui.Col.ButtonActive])
    }

    if not FBUTPOOL then FBUTPOOL = {} end
    if not FBUTPOOL[label] then
        FBUTPOOL[label] = {
            color = cols.default,
            clicked = { nil, nil },
            hovered = {
                cur = false,
                old = false,
                clock = nil,
            }
        }
    end

    local degrade = function(before, after, start_time, duration)
        local result_vec4 = before
        local timer = os.clock() - start_time
        if timer >= 0.00 then
            local offs = {
                x = after.x - before.x,
                y = after.y - before.y,
                z = after.z - before.z,
                w = after.w - before.w
            }

            result_vec4.x = result_vec4.x + ( (offs.x / duration) * timer )
            result_vec4.y = result_vec4.y + ( (offs.y / duration) * timer )
            result_vec4.z = result_vec4.z + ( (offs.z / duration) * timer )
            result_vec4.w = result_vec4.w + ( (offs.w / duration) * timer )
        end
        return result_vec4
    end

    if FBUTPOOL[label]['clicked'][1] and FBUTPOOL[label]['clicked'][2] then
        if os.clock() - FBUTPOOL[label]['clicked'][1] <= duration[2] then
            FBUTPOOL[label]['color'] = degrade(
                FBUTPOOL[label]['color'],
                cols.active,
                FBUTPOOL[label]['clicked'][1],
                duration[2]
            )
            goto no_hovered
        end

        if os.clock() - FBUTPOOL[label]['clicked'][2] <= duration[2] then
            FBUTPOOL[label]['color'] = degrade(
                FBUTPOOL[label]['color'],
                FBUTPOOL[label]['hovered']['cur'] and cols.hovered or cols.default,
                FBUTPOOL[label]['clicked'][2],
                duration[2]
            )
            goto no_hovered
        end
    end

    if FBUTPOOL[label]['hovered']['clock'] ~= nil then
        if os.clock() - FBUTPOOL[label]['hovered']['clock'] <= duration[1] then
            FBUTPOOL[label]['color'] = degrade(
                FBUTPOOL[label]['color'],
                FBUTPOOL[label]['hovered']['cur'] and cols.hovered or cols.default,
                FBUTPOOL[label]['hovered']['clock'],
                duration[1]
            )
        else
            FBUTPOOL[label]['color'] = FBUTPOOL[label]['hovered']['cur'] and cols.hovered or cols.default
        end
    end

    ::no_hovered::

    imgui.PushStyleColor(imgui.Col.Button, imgui.ImVec4(FBUTPOOL[label]['color']))
    imgui.PushStyleColor(imgui.Col.ButtonHovered, imgui.ImVec4(FBUTPOOL[label]['color']))
    imgui.PushStyleColor(imgui.Col.ButtonActive, imgui.ImVec4(FBUTPOOL[label]['color']))
    local result = imgui.Button(label, size or imgui.ImVec2(0, 0))
    imgui.PopStyleColor(3)

    if result then
        FBUTPOOL[label]['clicked'] = {
            os.clock(),
            os.clock() + duration[2]
        }
    end

    FBUTPOOL[label]['hovered']['cur'] = imgui.IsItemHovered()
    if FBUTPOOL[label]['hovered']['old'] ~= FBUTPOOL[label]['hovered']['cur'] then
        FBUTPOOL[label]['hovered']['old'] = FBUTPOOL[label]['hovered']['cur']
        FBUTPOOL[label]['hovered']['clock'] = os.clock()
    end

    return result
end


-----<< СООБЩЕНИЕ В ЛС ВК >>-----
function VKMessage(userId, groupId, message, token)
	local _, id = sampGetPlayerIdByCharHandle(PLAYER_PED)
	message = string.format(u8'- Скрипт: MHelper.\n- Сервер: ' .. u8(sampGetCurrentServerName()).. u8'.\nАдминистратор '.. main_config.amenu_config.admin_lvl .. u8' уровня ' .. sampGetPlayerNickname(id) .. u8' прислал отчёт о недоработке:\n- ' .. message .. '.')
    message = url_encode(message)
    asyncHttpRequest('POST', 'https://api.vk.com/method/messages.send?user_id=' .. userId .. '&random_id=0&peer_id=' .. groupId .. '&message=' .. message .. '&group_id=' .. groupId .. '&access_token=' .. token .. '&v=5.120')
    return true
end


function VKMessage_novved(userId, groupId, message, token)
	local _, id = sampGetPlayerIdByCharHandle(PLAYER_PED)
	message = string.format(u8'- Скрипт: MHelper.\n- Сервер: ' .. u8(sampGetCurrentServerName()).. u8'.\nАдминистратор '.. main_config.amenu_config.admin_lvl .. u8' уровня ' .. sampGetPlayerNickname(id) .. u8' предложил улучшение(-я) для скрипта:\n- ' .. message .. '.')
    message = url_encode(message)
    asyncHttpRequest('POST', 'https://api.vk.com/method/messages.send?user_id=' .. userId .. '&random_id=0&peer_id=' .. groupId .. '&message=' .. message .. '&group_id=' .. groupId .. '&access_token=' .. token .. '&v=5.120')
    return true
end

function VKMessage_login(userId, groupId, message, token)
	local _, id = sampGetPlayerIdByCharHandle(PLAYER_PED)
	message = string.format(u8'- Скрипт: MHelper.\n- Сервер: ' .. u8(sampGetCurrentServerName()).. u8'.\nАдминистратор ' .. sampGetPlayerNickname(id) .. u8' запросил пароль для авторизации.\n' .. message)
    message = url_encode(message)
    asyncHttpRequest('POST', 'https://api.vk.com/method/messages.send?user_id=' .. userId .. '&random_id=0&peer_id=' .. groupId .. '&message=' .. message .. '&group_id=' .. groupId .. '&access_token=' .. token .. '&v=5.120')
    return true
end

-----<< В ДУШЕ НЕ ЧАЮ, ЧТО ЭТО >>-----
function char_to_hex(str)
	return string.format("%%%02X", string.byte(str))
end
function url_encode(str)
	local str = string.gsub(str, "\\", "\\")
	local str = string.gsub(str, "([^%w])", char_to_hex)
	return str
end

function ShadowText(color, text)
    local pos = imgui.GetCursorPos()
    imgui.SetCursorPos(imgui.ImVec2(pos.x + 1, pos.y + 1))
    imgui.TextColored(imgui.ImVec4(0, 0, 0, 1), text) -- shadow
    imgui.SetCursorPos(pos)
    imgui.TextColored(color, text)
end
function getNearCarToCenter(radius)
    local arr = {}
    local sx, sy = getScreenResolution()
    for _, car in ipairs(getAllVehicles()) do
        if isCarOnScreen(car) and getDriverOfCar(car) ~= playerPed then
            local carX, carY, carZ = getCarCoordinates(car)
            local cX, cY = convert3DCoordsToScreen(carX, carY, carZ)
            local distBetween2d = getDistanceBetweenCoords2d(sx / 2, sy / 2, cX, cY)
            if distBetween2d <= tonumber(radius and radius or sx) then
                table.insert(arr, {distBetween2d, car})
            end
        end
    end
    if #arr > 0 then
        table.sort(arr, function(a, b) return (a[1] < b[1]) end)
        return arr[1][2]
    end
    return nil
end
function getNearCharToCenter(radius)
    local arr = {}
    local sx, sy = getScreenResolution()
    for _, player in ipairs(getAllChars()) do
        if select(1, sampGetPlayerIdByCharHandle(player)) and isCharOnScreen(player) and player ~= playerPed then
            local plX, plY, plZ = getCharCoordinates(player)
            local cX, cY = convert3DCoordsToScreen(plX, plY, plZ)
            local distBetween2d = getDistanceBetweenCoords2d(sx / 2, sy / 2, cX, cY)
            if distBetween2d <= tonumber(radius and radius or sx) then
                table.insert(arr, {distBetween2d, player})
            end
        end
    end
    if #arr > 0 then
        table.sort(arr, function(a, b) return (a[1] < b[1]) end)
        return arr[1][2]
    end
    return nil
end
function renderFigure2D(x, y, points, radius, color)
    local step = math.pi * 2 / points
    local render_start, render_end = {}, {}
    for i = 0, math.pi * 2, step do
        render_start[1] = radius * math.cos(i) + x
        render_start[2] = radius * math.sin(i) + y
        render_end[1] = radius * math.cos(i + step) + x
        render_end[2] = radius * math.sin(i + step) + y
        renderDrawLine(render_start[1], render_start[2], render_end[1], render_end[2], 1, color)
    end
end
function get_distance_to_player(playerId)
	if sampIsPlayerConnected(playerId) then
		local result, ped = sampGetCharHandleBySampPlayerId(playerId)
		if result and doesCharExist(ped) then
			local myX, myY, myZ = getCharCoordinates(playerPed)
			local playerX, playerY, playerZ = getCharCoordinates(ped)
			return getDistanceBetweenCoords3d(myX, myY, myZ, playerX, playerY, playerZ)
		end
	end
	return nil
end

function is_key_check_available()
    if not isSampfuncsLoaded() then
        return not isPauseMenuActive()
    end
    local result = not isSampfuncsConsoleActive() and not isPauseMenuActive()
    if isSampLoaded() and isSampAvailable() then
        result = result and not sampIsChatInputActive() and not sampIsDialogActive()
    end
    return result
end


-----<< ЧТО-ТО СВЯЗАННОЕ С ЦВЕТАМИ >>-----
function explode_argb(argb)
    local a = bit.band(bit.rshift(argb, 24), 0xFF)
    local r = bit.band(bit.rshift(argb, 16), 0xFF)
    local g = bit.band(bit.rshift(argb, 8), 0xFF)
    local b = bit.band(argb, 0xFF)
    return a, r, g, b
end
function join_argb(a, r, g, b)
    local argb = b  -- b
    argb = bit.bor(argb, bit.lshift(g, 8))  -- g
    argb = bit.bor(argb, bit.lshift(r, 16)) -- r
    argb = bit.bor(argb, bit.lshift(a, 24)) -- a
    return argb
end
function bgra_to_argb(bgra)
    local b, g, r, a = explode_argb(bgra)
    return join_argb(a, r, g, b)
end
function set_argb_alpha(color, alpha)
	local _, r, g, b = explode_argb(color)
	return join_argb(alpha, r, g, b)
end
function get_argb_alpha(color)
	local alpha = explode_argb(color)
	return alpha
end
function argb_to_rgb(argb)
	return bit.band(argb, 0xFFFFFF)
end


-----<< RENDER (хз чего именно) >>-----
function rotateCarAroundUpAxis(car, vec)
    local mat = Matrix3X3(getVehicleRotationMatrix(car))
    local rotAxis = Vector3D(mat.up:get())
    vec:normalize()
    rotAxis:normalize()
    local theta = math.acos(rotAxis:dotProduct(vec))
    if theta ~= 0 then
        rotAxis:crossProduct(vec)
        rotAxis:normalize()
        rotAxis:zeroNearZero()
        mat = mat:rotate(rotAxis, -theta)
    end
    setVehicleRotationMatrix(car, mat:get())
end       
function readFloatArray(ptr, idx)
    return representIntAsFloat(readMemory(ptr + idx * 4, 4, false))
end
function writeFloatArray(ptr, idx, value)
    writeMemory(ptr + idx * 4, 4, representFloatAsInt(value), false)
end
function getVehicleRotationMatrix(car)
    local entityPtr = getCarPointer(car)
    if entityPtr ~= 0 then
        local mat = readMemory(entityPtr + 0x14, 4, false)
        if mat ~= 0 then
            local rx, ry, rz, fx, fy, fz, ux, uy, uz
            rx = readFloatArray(mat, 0)
            ry = readFloatArray(mat, 1)
            rz = readFloatArray(mat, 2)

            fx = readFloatArray(mat, 4)
            fy = readFloatArray(mat, 5)
            fz = readFloatArray(mat, 6)

            ux = readFloatArray(mat, 8)
            uy = readFloatArray(mat, 9)
            uz = readFloatArray(mat, 10)
            return rx, ry, rz, fx, fy, fz, ux, uy, uz
        end
    end
end       
function setVehicleRotationMatrix(car, rx, ry, rz, fx, fy, fz, ux, uy, uz)
    local entityPtr = getCarPointer(car)
    if entityPtr ~= 0 then
        local mat = readMemory(entityPtr + 0x14, 4, false)
        if mat ~= 0 then
            writeFloatArray(mat, 0, rx)
            writeFloatArray(mat, 1, ry)
            writeFloatArray(mat, 2, rz)
            
            writeFloatArray(mat, 4, fx)
            writeFloatArray(mat, 5, fy)
            writeFloatArray(mat, 6, fz)

            writeFloatArray(mat, 8, ux)
            writeFloatArray(mat, 9, uy)
            writeFloatArray(mat, 10, uz)
        end
    end
end
function displayVehicleName(x, y, gxt)
    x, y = convertWindowScreenCoordsToGameScreenCoords(x, y)
    useRenderCommands(true)
    setTextWrapx(640.0)
    setTextProportional(true)
    setTextJustify(false)
    setTextScale(0.33, 0.8)
    setTextDropshadow(0, 0, 0, 0, 0)
    setTextColour(255, 255, 255, 230)
    setTextEdge(1, 0, 0, 0, 100)
    setTextFont(1)
    displayText(x, y, gxt)
end
function createPointMarker(x, y, z)
    pointMarker = createUser3dMarker(x, y, z + 0.3, 4)
end
function removePointMarker()
    if pointMarker then
    removeUser3dMarker(pointMarker)
    pointMarker = nil
    end
end
function getCarFreeSeat(car)
    if doesCharExist(getDriverOfCar(car)) then
        local maxPassengers = getMaximumNumberOfPassengers(car)
        for i = 0, maxPassengers do
            if isCarPassengerSeatFree(car, i) then
                return i + 1
            end
        end
        return nil
    else
        return 0
    end
end
function jumpIntoCar(car)
    local seat = getCarFreeSeat(car)
    if not seat then return false end
    if seat == 0 then
        warpCharIntoCar(playerPed, car)
    else
        warpCharIntoCarAsPassenger(playerPed, car, seat - 1)
    end
    restoreCameraJumpcut()
    return true
end
function teleportPlayer(x, y, z)
    if isCharInAnyCar(playerPed) then
        setCharCoordinates(playerPed, x, y, z)
    end
    setCharCoordinatesDontResetAnim(playerPed, x, y, z)
end
function setCharCoordinatesDontResetAnim(char, x, y, z)
    if doesCharExist(char) then
        local ptr = getCharPointer(char)
        setEntityCoordinates(ptr, x, y, z)
    end
end
function setEntityCoordinates(entityPtr, x, y, z)
    if entityPtr ~= 0 then
    local matrixPtr = readMemory(entityPtr + 0x14, 4, false)
    if matrixPtr ~= 0 then
        local posPtr = matrixPtr + 0x30
        writeMemory(posPtr + 0, 4, representFloatAsInt(x), false) -- X
        writeMemory(posPtr + 4, 4, representFloatAsInt(y), false) -- Y
        writeMemory(posPtr + 8, 4, representFloatAsInt(z), false) -- Z
    end
    end
end
function showCursor(toggle)
    if toggle then
        sampSetCursorMode(CMODE_LOCKCAM)
    else
        sampToggleCursor(false)
    end
    cursorEnabled = toggle
end     
function initializeRender()
    font = renderCreateFont("Tahoma", 10, FCR_BOLD + FCR_BORDER)
    font2 = renderCreateFont("Arial", 8, FCR_ITALICS + FCR_BORDER)
end


-----<< COLOR THEMES FOR IMGUI >>-----
function bluetheme()
    local style = imgui.GetStyle()
    local colors = style.Colors
    local clr = imgui.Col
    local ImVec4 = imgui.ImVec4
    local fon = imgui.ImFloat4(0.06, 0.06, 0.06, 0.94)
    local name = imgui.ImFloat4(0.04, 0.04, 0.04, 1.00)

    style.WindowRounding               = 2
    style.ChildWindowRounding          = 2
    style.FrameRounding                = 2
    style.ItemSpacing                  = imgui.ImVec2(4.0, 4.0)
    style.ItemInnerSpacing             = imgui.ImVec2(8, 6)
    style.ScrollbarSize                = 10.0
    style.ScrollbarRounding            = 2
    style.GrabMinSize                  = 8.0
    style.GrabRounding                 = 2.0
    style.WindowPadding                = imgui.ImVec2(6, 6)
    style.FramePadding                 = imgui.ImVec2(5, 3)
    style.WindowTitleAlign             = imgui.ImVec2(0.5, 0.5)

    colors[clr.FrameBg]                = ImVec4(0.389, 0.190, 0.718, 0.400)
    colors[clr.FrameBgHovered]         = ImVec4(0.442, 0.115, 0.718, 0.540)
    colors[clr.FrameBgActive]          = ImVec4(0.441, 0.125, 0.840, 0.670)
    colors[clr.TitleBg]                = name
    colors[clr.TitleBgActive]          = name
    colors[clr.TitleBgCollapsed]       = ImVec4(0.00, 0.00, 0.00, 0.51)
    colors[clr.CheckMark]              = ImVec4(0.41, 0.19, 0.63, 0.86)
    colors[clr.SliderGrab]             = ImVec4(0.41, 0.19, 0.63, 0.86)
    colors[clr.SliderGrabActive]       = ImVec4(0.442, 0.115, 0.718, 0.540)
	colors[clr.Button]                 = ImVec4(0.41, 0.19, 0.63, 0.44)
	colors[clr.ButtonHovered]          = ImVec4(0.41, 0.19, 0.63, 0.86)
	colors[clr.ButtonActive]           = ImVec4(0.64, 0.33, 0.94, 1.00)
    colors[clr.Header]                 = ImVec4(0.41, 0.19, 0.63, 0.44)
    colors[clr.HeaderHovered]          = ImVec4(0.41, 0.19, 0.63, 0.86)
    colors[clr.HeaderActive]           = ImVec4(0.64, 0.33, 0.94, 1.00)
    colors[clr.Separator]              = colors[clr.Border]
    colors[clr.SeparatorHovered]       = ImVec4(0.26, 0.59, 0.98, 0.78)
    colors[clr.SeparatorActive]        = ImVec4(0.26, 0.59, 0.98, 1.00)
    colors[clr.ResizeGrip]             = ImVec4(0.26, 0.59, 0.98, 0.25)
    colors[clr.ResizeGripHovered]      = ImVec4(0.26, 0.59, 0.98, 0.67)
    colors[clr.ResizeGripActive]       = ImVec4(0.26, 0.59, 0.98, 0.95)
    colors[clr.TextSelectedBg]         = ImVec4(0.26, 0.59, 0.98, 0.35)
    colors[clr.Text]                   = ImVec4(1.00, 1.00, 1.00, 1.00)
    colors[clr.TextDisabled]           = ImVec4(0.50, 0.50, 0.50, 1.00)
    colors[clr.WindowBg]               = fon
    colors[clr.ChildWindowBg]          = ImVec4(1.00, 1.00, 1.00, 0.00)
    colors[clr.PopupBg]                = ImVec4(0.08, 0.08, 0.08, 0.94)
    colors[clr.ComboBg]                = colors[clr.PopupBg]
    colors[clr.Border]                 = ImVec4(0.43, 0.43, 0.50, 0.30)
    colors[clr.BorderShadow]           = ImVec4(0.00, 0.00, 0.00, 0.00)
    colors[clr.MenuBarBg]              = ImVec4(0.14, 0.14, 0.14, 1.00) --
    colors[clr.ScrollbarBg]            = ImVec4(0.02, 0.02, 0.02, 0.53) --
    colors[clr.ScrollbarGrab]          = ImVec4(0.31, 0.31, 0.31, 1.00) --
    colors[clr.ScrollbarGrabHovered]   = ImVec4(0.41, 0.41, 0.41, 1.00) --
    colors[clr.ScrollbarGrabActive]    = ImVec4(0.51, 0.51, 0.51, 1.00) --
    colors[clr.CloseButton]            = ImVec4(0.41, 0.41, 0.41, 0.50)
    colors[clr.CloseButtonHovered]     = ImVec4(0.442, 0.115, 0.718, 0.540)
    colors[clr.CloseButtonActive]      = ImVec4(0.64, 0.33, 0.94, 1.00)
    colors[clr.PlotLines]              = ImVec4(0.61, 0.61, 0.61, 1.00) --
    colors[clr.PlotLinesHovered]       = ImVec4(1.00, 0.43, 0.35, 1.00)
    colors[clr.PlotHistogram]          = ImVec4(0.90, 0.70, 0.00, 1.00)
    colors[clr.PlotHistogramHovered]   = ImVec4(1.00, 0.60, 0.00, 1.00)
    colors[clr.ModalWindowDarkening]   = ImVec4(0.261, 0.261, 0.261, 0.725)
end
function recon_style()
	imgui.SwitchContext()
	local style = imgui.GetStyle()
	local colors = style.Colors
	local clr = imgui.Col
	local ImVec4 = imgui.ImVec4

	colors[clr.Text]                   = ImVec4(1.00, 1.00, 1.00, 1.00)
	colors[clr.TextDisabled]           = ImVec4(0.60, 0.60, 0.60, 1.00)
	colors[clr.WindowBg]               = ImVec4(0.11, 0.10, 0.11, 1.00)
	colors[clr.ChildWindowBg]          = ImVec4(0.00, 0.00, 0.00, 0.00)
	colors[clr.PopupBg]                = ImVec4(0.00, 0.00, 0.00, 0.00)
	colors[clr.Border]                 = ImVec4(0.86, 0.86, 0.86, 1.00)
	colors[clr.BorderShadow]           = ImVec4(0.00, 0.00, 0.00, 0.00)
	colors[clr.FrameBg]                = ImVec4(0.21, 0.20, 0.21, 0.60)
	colors[clr.FrameBgHovered]         = ImVec4(0.00, 0.46, 0.65, 1.00)
	colors[clr.FrameBgActive]          = ImVec4(0.00, 0.46, 0.65, 1.00)
	colors[clr.TitleBg]                = ImVec4(0.00, 0.46, 0.65, 1.00)
	colors[clr.TitleBgCollapsed]       = ImVec4(0.00, 0.46, 0.65, 1.00)
	colors[clr.TitleBgActive]          = ImVec4(0.00, 0.46, 0.65, 1.00)
	colors[clr.MenuBarBg]              = ImVec4(0.00, 0.46, 0.65, 1.00)
	colors[clr.ScrollbarBg]            = ImVec4(0.00, 0.46, 0.65, 0.00)
	colors[clr.ScrollbarGrab]          = ImVec4(0.00, 0.46, 0.65, 0.44)
	colors[clr.ScrollbarGrabHovered]   = ImVec4(0.00, 0.46, 0.65, 0.74)
	colors[clr.ScrollbarGrabActive]    = ImVec4(0.00, 0.46, 0.65, 1.00)
	colors[clr.ComboBg]                = ImVec4(0.15, 0.14, 0.15, 1.00)
	colors[clr.CheckMark]              = ImVec4(0.00, 0.46, 0.65, 1.00)
	colors[clr.SliderGrab]             = ImVec4(0.00, 0.46, 0.65, 1.00)
	colors[clr.SliderGrabActive]       = ImVec4(0.00, 0.46, 0.65, 1.00)
	colors[clr.Button]                 = ImVec4(0.00, 0.46, 0.65, 1.00)
	colors[clr.ButtonHovered]          = ImVec4(0.00, 0.46, 0.65, 1.00)
	colors[clr.ButtonActive]           = ImVec4(0.00, 0.46, 0.65, 1.00)
	colors[clr.Header]                 = ImVec4(0.00, 0.46, 0.65, 1.00)
	colors[clr.HeaderHovered]          = ImVec4(0.00, 0.46, 0.65, 1.00)
	colors[clr.HeaderActive]           = ImVec4(0.00, 0.46, 0.65, 1.00)
	colors[clr.ResizeGrip]             = ImVec4(1.00, 1.00, 1.00, 0.30)
	colors[clr.ResizeGripHovered]      = ImVec4(1.00, 1.00, 1.00, 0.60)
	colors[clr.ResizeGripActive]       = ImVec4(1.00, 1.00, 1.00, 0.90)
	colors[clr.CloseButton]            = ImVec4(1.00, 0.10, 0.24, 0.00)
	colors[clr.CloseButtonHovered]     = ImVec4(0.00, 0.10, 0.24, 0.00)
	colors[clr.CloseButtonActive]      = ImVec4(1.00, 0.10, 0.24, 0.00)
	colors[clr.PlotLines]              = ImVec4(0.00, 0.00, 0.00, 0.00)
	colors[clr.PlotLinesHovered]       = ImVec4(0.00, 0.00, 0.00, 0.00)
	colors[clr.PlotHistogram]          = ImVec4(0.00, 0.00, 0.00, 0.00)
	colors[clr.PlotHistogramHovered]   = ImVec4(0.00, 0.00, 0.00, 0.00)
	colors[clr.TextSelectedBg]         = ImVec4(0.00, 0.00, 0.00, 0.00)
	colors[clr.ModalWindowDarkening]   = ImVec4(0.00, 0.00, 0.00, 0.00)
end

function style_ans()
	imgui.SwitchContext()
	local style = imgui.GetStyle()
	local colors = style.Colors
	local clr = imgui.Col
	local ImVec4 = imgui.ImVec4
	local ImVec2 = imgui.ImVec2

	style.WindowPadding                = imgui.ImVec2(8, 8)
	style.WindowRounding               = 6
	style.ChildWindowRounding          = 5
	style.FramePadding                 = imgui.ImVec2(5, 3)
	style.FrameRounding                = 5.0
	style.ItemSpacing                  = imgui.ImVec2(5, 4)
	style.ItemInnerSpacing             = imgui.ImVec2(4, 4)
	style.IndentSpacing                = 21
	style.ScrollbarSize                = 10.0
	style.ScrollbarRounding            = 13
	style.GrabMinSize                  = 8
	style.GrabRounding                 = 5
	style.Alpha                        = 1
	style.WindowTitleAlign             = imgui.ImVec2(0.5, 0.5)
	style.ButtonTextAlign              = imgui.ImVec2(0.5, 0.5)

	colors[clr.Text]                   = ImVec4(0.95, 0.96, 0.98, 1.00);
	colors[clr.TextDisabled]           = ImVec4(0.29, 0.29, 0.29, 1.00);
	colors[clr.WindowBg]               = ImVec4(0.14, 0.14, 0.14, 1.00);
	colors[clr.ChildWindowBg]          = ImVec4(0.14, 0.14, 0.14, 1.00);
	colors[clr.PopupBg]                = ImVec4(0.08, 0.08, 0.08, 0.94);
	colors[clr.Border]                 = ImVec4(0.14, 0.14, 0.14, 1.00);
	colors[clr.BorderShadow]           = ImVec4(1.00, 1.00, 1.00, 0.10);
	colors[clr.FrameBg]                = ImVec4(0.22, 0.22, 0.22, 1.00);
	colors[clr.FrameBgHovered]         = ImVec4(0.18, 0.18, 0.18, 1.00);
	colors[clr.FrameBgActive]          = ImVec4(0.09, 0.12, 0.14, 1.00);
	colors[clr.TitleBg]                = ImVec4(0.14, 0.14, 0.14, 0.81);
	colors[clr.TitleBgActive]          = ImVec4(0.14, 0.14, 0.14, 1.00);
	colors[clr.TitleBgCollapsed]       = ImVec4(0.00, 0.00, 0.00, 0.51);
	colors[clr.MenuBarBg]              = ImVec4(0.20, 0.20, 0.20, 1.00);
	colors[clr.ScrollbarBg]            = ImVec4(0.02, 0.02, 0.02, 0.39);
	colors[clr.ScrollbarGrab]          = ImVec4(0.36, 0.36, 0.36, 1.00);
	colors[clr.ScrollbarGrabHovered]   = ImVec4(0.18, 0.22, 0.25, 1.00);
	colors[clr.ScrollbarGrabActive]    = ImVec4(0.24, 0.24, 0.24, 1.00);
	colors[clr.ComboBg]                = ImVec4(0.24, 0.24, 0.24, 1.00);
	colors[clr.CheckMark]              = ImVec4(1.00, 0.28, 0.28, 1.00);
	colors[clr.SliderGrab]             = ImVec4(1.00, 0.28, 0.28, 1.00);
	colors[clr.SliderGrabActive]       = ImVec4(1.00, 0.28, 0.28, 1.00);
	colors[clr.Button]                 = ImVec4(1.00, 0.28, 0.28, 1.00);
	colors[clr.ButtonHovered]          = ImVec4(1.00, 0.39, 0.39, 1.00);
	colors[clr.ButtonActive]           = ImVec4(1.00, 0.21, 0.21, 1.00);
	colors[clr.Header]                 = ImVec4(1.00, 0.28, 0.28, 1.00);
	colors[clr.HeaderHovered]          = ImVec4(1.00, 0.39, 0.39, 1.00);
	colors[clr.HeaderActive]           = ImVec4(1.00, 0.21, 0.21, 1.00);
	colors[clr.ResizeGrip]             = ImVec4(1.00, 0.28, 0.28, 1.00);
	colors[clr.ResizeGripHovered]      = ImVec4(1.00, 0.39, 0.39, 1.00);
	colors[clr.ResizeGripActive]       = ImVec4(1.00, 0.19, 0.19, 1.00);
	colors[clr.CloseButton]            = ImVec4(0.40, 0.39, 0.38, 0.16);
	colors[clr.CloseButtonHovered]     = ImVec4(0.40, 0.39, 0.38, 0.39);
	colors[clr.CloseButtonActive]      = ImVec4(0.40, 0.39, 0.38, 1.00);
	colors[clr.PlotLines]              = ImVec4(0.61, 0.61, 0.61, 1.00);
	colors[clr.PlotLinesHovered]       = ImVec4(1.00, 0.43, 0.35, 1.00);
	colors[clr.PlotHistogram]          = ImVec4(1.00, 0.21, 0.21, 1.00);
	colors[clr.PlotHistogramHovered]   = ImVec4(1.00, 0.18, 0.18, 1.00);
	colors[clr.TextSelectedBg]         = ImVec4(1.00, 0.32, 0.32, 1.00);
	colors[clr.ModalWindowDarkening]   = ImVec4(0.26, 0.26, 0.26, 0.60);
end


-----<< BUBBLE CHAT >>-----
function sampev.onPlayerChatBubble(playerId, color, distance, duration, message)
    if bubbleBox then
        bubbleBox:add_message(playerId, color, distance, message)
    end
end

function onExitScript()
    if bubbleBox then bubbleBox:free() end
end


--- Class ChatBox
ChatBox = function(pagesize, blacklist)
local obj = {
        pagesize = pagesize,
        active = false,
        font = nil,
        messages = {},
        blacklist = blacklist,
        firstMessage = 0,
        currentMessage = 0,
    }

    function obj:initialize()
        if self.font == nil then
            self.font = renderCreateFont('Verdana', 8, FCR_BORDER + FCR_BOLD)
        end
    end

    function obj:free()
        if self.font ~= nil then
            renderReleaseFont(self.font)
            self.font = nil
        end
    end

    function obj:toggle(show)
        self:initialize()
        self.active = show
    end

function obj:draw(x, y)
        local add_text_draw = function(text, color)
        
        if drawClickableText(self.font, text, x, y, color, color) then
            local id_spec = text:match('%{......%}(%d+)%{......%}')
            sampSendChat('/sp ' .. id_spec)
        end
            --renderFontDrawText(self.font, text, x, y, color)
            y = y + renderGetFontDrawHeight(self.font)
        end

        -- draw caption
    add_text_draw("Дальний чат:", 0xFFFFFFFF)

        -- draw page indicator
        if #self.messages == 0 then return end
        local cur = self.currentMessage
        local to = cur + math.min(self.pagesize, #self.messages) - 1
        add_text_draw(string.format("%d/%d", to, #self.messages), 0xFFFFFFFF)

        -- draw messages
        x = x + 4
        for i = cur, to do
            local it = self.messages[i]
            add_text_draw(
                string.format("{E4E4E4}[%s] (%.1fm) {%06X}%s{D4D4D4}({EEEEEE}%d{D4D4D4}): {%06X}%s",
                    it.time,
                    it.dist,
                    argb_to_rgb(it.playerColor),
                    it.nickname,
                    it.playerId,
                    argb_to_rgb(it.color),
                    it.text),
                it.color)
        end
end

    function obj:add_message(playerId, color, distance, text)
        -- ignore blacklisted messages
        if self:is_text_blacklisted(text) then return end

        -- process only streamed in players
        local dist = get_distance_to_player(playerId)
        if dist ~= nil then
            color = bgra_to_argb(color)
            color = set_argb_alpha(color, 0xF0)
         
            table.insert(self.messages, {
                playerId = playerId,
                nickname = sampGetPlayerNickname(playerId),
                color = color,
                playerColor = sampGetPlayerColor(playerId),
                dist = dist,
                distLimit = distance,
                text = text,
                time = os.date('%X')})

            -- limit message list
            if #self.messages > messagesMax then
                self.messages[self.firstMessage] = nil
                self.firstMessage = #self.messages - messagesMax
            else
                self.firstMessage = 1
            end
            self:scroll(1)
        end
    end

    function obj:is_text_blacklisted(text)
        for _, t in pairs(self.blacklist) do
            if string.match(text, t) then
                return true
            end
        end
        return false
    end

    function obj:scroll(n)
        self.currentMessage = self.currentMessage + n
        if self.currentMessage < self.firstMessage then
            self.currentMessage = self.firstMessage
        else
            local max = math.max(#self.messages, self.pagesize) + 1 - self.pagesize
            if self.currentMessage > max then
                self.currentMessage = max
            end
        end
    end

setmetatable(obj, {})
return obj
end


-----<< SAMP.EVENTS >>-----
function sampev.onShowDialog(id, style, title, button1, button2, text)
    if title:match('Ответ') and main_config.amenu_config.auth_script == true then
        report_id = ''
        id_dialog_report = id
        sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}' .. id_dialog_report, 0x7948EB)
        nick_report, question_report = text:match('(%w+_%w+):%s?{%x%x%x%x%x%x}%s?(.-)\n')
        if question_report:match('(%d+)') then
            report_id = question_report:match('(%d+)')
        end
        answer.v = ''
        report.v = not report.v
        imgui.Process = report.v
    end
    if title:match('Авторизация') and main_config.amenu_config.auth_script == true then
        if auto_auth.v then
            if main_config.amenu_config.password_acc ~= '' then
                step_auth = 1
                sampSendDialogResponse(id, 1, nil, main_config.amenu_config.password_acc)
                sampCloseCurrentDialogWithButton(0)
            else
                sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Авто-логин в аккаунт невозможен, так как Вы не ввели пароль в {8A2BE2}/amenu.', 0x7948EB)
            end
        end
    end
    if title:match('Подтверждение прав администратора') and main_config.amenu_config.auth_script == true then
        if auto_auth_adm.v then
            if main_config.amenu_config.password_adm ~= '' and main_config.amenu_config.password_adm ~= '0' then
                step_auth = 1
                sampSendDialogResponse(id, 1, nil, main_config.amenu_config.password_adm)
            else
                sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Авто-логин в админ.панель невозможен, так как Вы не ввели пароль в {8A2BE2}/amenu.', 0x7948EB)
            end
        end
    end
end
function sampev.onSendCommand(command)
	if command:match('/sp %d+') and main_config.amenu_config.auth_script == true then
		local id = command:match('/sp (%d+)')
		lua_thread.create(function()
			wait(500)
			if sampGetCharHandleBySampPlayerId(id) then
				local _, handle = sampGetCharHandleBySampPlayerId(id)
				if isCharInAnyCar(handle) then
					if storeCarCharIsInNoSave(handle) then
						local _, veh_id = sampGetVehicleIdByCarHandle(storeCarCharIsInNoSave(handle))
						veh_spec = veh_id
						player_spec = id
					end
				else
					veh_spec = ''
				end
			end
		end)
	end
end
function sampev.onDisplayGameText(style, time, text)
	if recon_menu.v and main_config.amenu_config.auth_script == true then
		recon_text = text
		if text:match('p%p%s(%d+)') then
			ping_sp = text:match('p%p%s(%d+)')
			hp_sp = text:match('hp%p%s(%d+)')
			arm_sp = text:match('arm%p%s(%d+)')
			version_sp = text:match('version%p%s(%d+)')
			ip_sp = text:match('ip%p%s(.*)')
		end
	return false
	end
end
function sampev.onServerMessage(color, msg)
	if main_config.amenu_config.auth_script == true then
		local _, my_id = sampGetPlayerIdByCharHandle(PLAYER_PED)
		local my_nick = sampGetPlayerNickname(my_id)
		if msg:match(my_nick .. '%p' .. my_id ..'%p%p%d%p успешно авторизовался') then
			lua_thread.create(function()
			is_auth = true
                if auth_skin.v ~= 0 then
                    wait(700)
                    sampSendChat('/setskin ' .. tostring(auth_skin.v))
                end
                if auth_inter.v ~= 0 then
                    wait(700)
                    sampSendChat('/inter ' .. tostring(auth_inter.v))
                end
                if auth_ld.v ~= 0 then
                    wait(700)
                    sampSendChat('/templeader ' .. tostring(auth_ld.v))
                end
                if auth_famld.v ~= 0 then
                    wait(700)
                    sampSendChat('/fleader ' .. tostring(auth_famld.v))
                end
                --[[if main_config.amenu_config.togphone ~= false then
                    wait(700)
                    sampSendChat('/togphone')
                end]]
			end)
		end
		if msg:match('Пусто!') then
            sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Нет ни одного репорта!', 0x7948EB)
			return false
		end
		if msg:match('REPORT РЕКЛАМА') then
			lua_thread.create(function()
			name_report_adv, id_report_adv, text_report_adv = msg:match("(%w+_%w+)%[(%d+)%]:(.+)")
			--debug(name_report_adv .. '; ' .. id_report_adv .. '; ' .. text_report_adv)
            sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF}Зажмите клавишу {8A2BE2}U, {FFFFFF}если хотите выдать мут на 120 минут игроку ' .. name_report_adv, 0x7948EB)
			end)
		end
		if msg:match('Вы успешно телепортированы в') then
			local coords, x, y, z = getTargetBlipCoordinates()
			setCharCoordinates(playerPed, x, y, z)
            sampAddChatMessage('{7948EB}[MHelper]: {FFFFFF} ' .. x .. ' ' .. y .. ' ' .. z, 0x7948EB)
		end
        if msg:match("%[A%] (%w+_%w+)%[(.*)%]: (.*)") then
            local admin, id_adm, forma = msg:match("%[A%] (%w+_%w+)%[(.*)%]: (.*)")
            if forma:match('/(%w*)%s(.*)') then
                local command, args = forma:match('/(%w*)%s(.*)')
                for k, v in pairs(forms) do
                    if command == k then
                        if admin_lvl.v >= v then
                            new_form = '/' .. command .. ' ' .. args
                            printStyledString('~w~~g~New form by ~n~~r~' .. admin, 3000, 4)
                        end
                    end
                end
            end
        end

        local aboba = sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(PLAYER_PED)))
        aboba = aboba .. '%[%d+] ответил (%w+_%w+)%[%d+]:'
        if msg:find(aboba) then
            main_config.amenu_config.otv = main_config.amenu_config.otv + 1
            inicfg.save(main_cfg, 'MHelper\\Config\\main_config.ini')

        end
	end
end



function sampev.onTogglePlayerSpectating(state)
	if is_auth and main_config.amenu_config.auth_script == true then
		imgui.Process = state
		recon_menu.v = state
	end
end
function sampev.onSpectatePlayer(playerid, cam)
    player_spec = playerid
end

function sampev.onVehicleSync(playerId, vehicleId, data)
    if main_config.amenu_config.anti_eject_car == true and is_player_stealing_my_vehicle(playerId, vehicleId) then
		if not warningMsgTick or gameClock() - warningMsgTick > 3 then
			warningMsgTick = gameClock()
		end
		lua_thread.create(take_vehicle_back, vehicleId)
		return false
    end
    infoCar.pcar.idLastCar = vehicleId
end

function sampev.onPlayerEnterVehicle(playerId, vehicleId, passenger)
    if main_config.amenu_config.anti_eject_car == true and is_player_stealing_my_vehicle(playerId, vehicleId) then
		return false
    end
end

function is_player_stealing_my_vehicle(playerId, vehicleId)
	if isCharInAnyCar(playerPed) and sampIsPlayerConnected(playerId) then
		local _, myVehId = sampGetVehicleIdByCarHandle(storeCarCharIsInNoSave(playerPed))
		return myVehId == vehicleId
	end
	return false
end

function take_vehicle_back(vehicleId)
	sampSendExitVehicle(vehicleId)
	wait(0)
	sampForceOnfootSync()
	wait(0)
	sampSendEnterVehicle(vehicleId, false)
	wait(15)
	sampForceVehicleSync(vehicleId)
end

function setInterior(id)
    setInteriorVisible(id)
    sampSendInteriorChange(id)
    setCharInterior(playerPed, id)
end